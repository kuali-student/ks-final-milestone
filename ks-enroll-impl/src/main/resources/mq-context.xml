<beans
        xmlns="http://www.springframework.org/schema/beans"
        xmlns:amq="http://activemq.apache.org/schema/core"
        xmlns:jms="http://www.springframework.org/schema/jms"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd
  http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms-2.5.xsd">

    <amq:broker useJmx="false" persistent="false">
        <amq:transportConnectors>
            <amq:transportConnector uri="tcp://localhost:0" />
        </amq:transportConnectors>
    </amq:broker>

    <amq:connectionFactory id="connectionFactory" brokerURL="vm://localhost"/>

    <!-- Spring JMS Template -->
    <bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
        <property name="connectionFactory">
            <ref local="connectionFactory"/>
        </property>
    </bean>


    <jms:listener-container concurrency="10" >
        <jms:listener id="queueListener" destination="Test.Queue.Name" ref="testMessageListener" />
        <jms:listener id="regInitListener" destination="org.kuali.student.enrollment.registration.initilizationListenerQueue" ref="registrationInitilizationListener" />
        <jms:listener id="regVerificationListener" destination="org.kuali.student.enrollment.registration.verificationQueue" ref="registrationVerificationListener" />
        <jms:listener id="regSeatCheckListener" destination="org.kuali.student.enrollment.registration.seatCheckQueue" ref="registrationSeatCheckListener" />
    </jms:listener-container>

    <bean id="testMessageListener" class="org.kuali.student.enrollment.ui.registration.mq.TestMessageListener"/>


    <bean id="registrationInitilizationListener" class="org.kuali.student.enrollment.registration.engine.listener.BaseRegistrationListener">
        <property name="jmsTemplate" ref="jmsTemplate"/>
        <property name="destinations">
            <list>
                <value>org.kuali.student.enrollment.registration.verificationQueue</value>
            </list>
        </property>
        <property name="registrationProcessService" ref="courseRegistratoinInitilizationService"/>
    </bean>

    <bean id="registrationVerificationListener" class="org.kuali.student.enrollment.registration.engine.listener.BaseRegistrationListener">
        <property name="jmsTemplate" ref="jmsTemplate"/>
        <property name="destinations">
            <list>
                <value>org.kuali.student.enrollment.registration.seatCheckQueue</value>
            </list>
        </property>
        <property name="registrationProcessService" ref="courseRegistratoinVerificationService"/>
    </bean>

    <bean id="registrationSeatCheckListener" class="org.kuali.student.enrollment.registration.engine.listener.BaseRegistrationListener">
        <property name="jmsTemplate" ref="jmsTemplate"/>

        <property name="registrationProcessService" ref="courseRegistratoinSeatCheckService"/>
    </bean>

    <bean id="courseRegistratoinInitilizationService" class="org.kuali.student.enrollment.registration.engine.service.impl.CourseRegistrationInitilizationServiceImpl"/>
    <bean id="courseRegistratoinVerificationService" class="org.kuali.student.enrollment.registration.engine.service.impl.CourseRegistrationVerificationServiceImpl"/>
    <bean id="courseRegistratoinSeatCheckService" class="org.kuali.student.enrollment.registration.engine.service.impl.CourseRegistrationSeatCheckServiceImpl"/>


</beans>
