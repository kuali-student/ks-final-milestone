--KSENROLL-5151
--These result values with correct keys were missing
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.0.0', '95d86915-79e1-4d4d-acc9-5c18d99736f8', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '0.0', null, null, 'kuali.result.scale.credit.degree', 1, '0.0', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.0.5', '1031d194-1d7b-4bc9-b5be-109a6e4865e9', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '0.5', null, null, 'kuali.result.scale.credit.degree', 1, '0.5', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.16.5', '82e995a9-561d-492c-960c-3b2a006c129d', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '16.5', null, null, 'kuali.result.scale.credit.degree', 1, '16.5', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.17.0', '525cf0ff-58c2-41c4-aabc-803bd899fd43', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '17.0', null, null, 'kuali.result.scale.credit.degree', 1, '17.0', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.17.5', 'd2a2e932-7087-439a-aa55-7c0a87176c3a', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '17.5', null, null, 'kuali.result.scale.credit.degree', 1, '17.5', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.18.0', '452e9f44-cb20-4ba3-b3d7-ba8d48194ff4', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '18.0', null, null, 'kuali.result.scale.credit.degree', 1, '18.0', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.18.5', '27e973c6-949b-480f-a3be-698a86a211b2', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '18.5', null, null, 'kuali.result.scale.credit.degree', 1, '18.5', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.19.0', '7a836043-582b-4895-b77c-0cb8fcc4d7d0', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '19.0', null, null, 'kuali.result.scale.credit.degree', 1, '19.0', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.19.5', 'd247f756-44e1-408f-8893-e519398437a0', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '19.5', null, null, 'kuali.result.scale.credit.degree', 1, '19.5', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/
insert into KSEN_LRC_RESULT_VALUE (ID, OBJ_ID, RESULT_VALUE_TYPE, RESULT_VALUE_STATE, NAME, DESCR_PLAIN, DESCR_FORMATTED, RESULT_SCALE_ID, NUMERIC_VALUE, RESULT_VALUE, EFF_DT, EXPIR_DT, VER_NBR, CREATETIME, CREATEID, UPDATETIME, UPDATEID) values ('kuali.result.value.credit.degree.20.0', '7879bc6c-6c58-4f80-8af3-fdf204ed7578', 'kuali.result.value.type.value', 'kuali.result.value.state.approved', '20.0', null, null, 'kuali.result.scale.credit.degree', 1, '20.0', TIMESTAMP '2012-12-06 11:04:41', null, 0, TIMESTAMP '2012-12-06 11:04:36', 'BATCH', TIMESTAMP '2012-12-06 11:04:36', 'BATCH')
/

--map the join table to point to proper result values with proper keys based on name
UPDATE
    KSEN_LRC_RVG_RESULT_VALUE updaterjrv
SET
    updaterjrv.RESULT_VALUE_ID=
    (
        SELECT
            rvnew.id newrv
        FROM
            KSEN_LRC_RESULT_VALUE rv,
            KSEN_LRC_RESULT_VALUE rvnew,
            KSEN_LRC_RVG_RESULT_VALUE rjrv
        WHERE
            rjrv.RESULT_VALUE_ID=rv.ID
        AND rv.DESCR_PLAIN IS NOT NULL
        AND rjrv.RVG_ID LIKE 'kuali.creditType.credit.degree.%'
        AND rvnew.ID LIKE 'kuali.result.value.credit.degree.%'
        AND rvnew.NAME=rv.name
        AND rjrv.RVG_ID=updaterjrv.RVG_ID
        AND rjrv.RESULT_VALUE_ID=updaterjrv.RESULT_VALUE_ID
    )
WHERE
    updaterjrv.RVG_ID IN
    (
        SELECT
            rjrv.RVG_ID
        FROM
            KSEN_LRC_RESULT_VALUE rv,
            KSEN_LRC_RVG_RESULT_VALUE rjrv
        WHERE
            rjrv.RESULT_VALUE_ID=rv.ID
        AND rv.DESCR_PLAIN IS NOT NULL
        AND rjrv.RVG_ID LIKE 'kuali.creditType.credit.degree.%'
    )
/

-- Delete the weird LRC result values
DELETE
    KSEN_LRC_RESULT_VALUE rv
WHERE
    rv.RESULT_SCALE_ID='kuali.result.scale.credit.degree'
AND id NOT LIKE 'kuali.result.value.credit.degree.%'
/

-- copy in missing description info from name
UPDATE
    KSEN_LRC_RESULT_VALUE
SET
    DESCR_PLAIN=NAME,
    DESCR_FORMATTED=NAME
WHERE
    DESCR_PLAIN IS NULL
AND DESCR_FORMATTED IS NULL
/
