<div class="kscr-SearchDetails"><!-- Search Details Header - Back to Results Link --><div class="kscr-SearchDetails-top"><a id="returnToSearch" ui-sref="root.search.results({ searchCriteria: searchCriteria })"><span>&#x00ab;</span> Return to Search Results</a></div><!-- Search Details Content --><div class="kscr-SearchDetails-container"><div class="kscr-SearchDetails-header util-Grid util-Grid--center"><span id="search_details_code" class="kscr-SearchDetails-courseCode">{{course.courseOfferingCode}}</span> <span id="search_details_title" class="kscr-SearchDetails-courseTitle util-Grid-cell">{{course.courseOfferingLongName}}</span> <span id="search_details_credits" class="kscr-SearchDetails-credits">{{course.creditOptions | creditRangeFormatter}}</span></div><div id="courseDescription_{{course.courseOfferingCode}}" class="kscr-SearchDetails-description">{{course.courseOfferingDesc}}</div><!-- Cross-listed courses --><div class="kscr-SearchDetails-crosslists" ng-if="course.crossListedCourses.length > 0"><i class="kscr-SearchDetails-crosslists-icon">CR</i> <span class="kscr-SearchDetails-label">Crosslisted as</span><ul><li ng-repeat="crosslist in course.crossListedCourses">{{crosslist.courseOfferingCode}}</li></ul></div><!-- Prerequisites --><div class="kscr-SearchDetails-prerequisites" ng-if="course.prerequisites.length > 0"><span class="kscr-SearchDetails-label">Prerequisites:</span><ul><li ng-repeat="prerequisite in course.prerequisites">{{prerequisite}}</li></ul></div><!-- Grading methods --><div class="kscr-SearchDetails-grading"><span class="kscr-SearchDetails-label">Grading Methods:</span><ul class="kscr-SearchDetails-grading-methods"><li class="kscr-SearchDetails-grading-method" ng-repeat="(key, label) in course.gradingOptions">{{label}}</li></ul></div><!-- Selected Activity Offerings Area --><div class="kscr-SearchDetails-actionsContainer util-Grid util-Grid--center"><!-- Selected Messages --><div class="kscr-SearchDetails-selection kscr-SearchDetails-selection--empty util-Grid-cell" ng-if="!selectedRegGroup && !hasSelectedAOs()"><span class="kscr-SearchDetails-label">No Activities Selected</span></div><div class="kscr-SearchDetails-selection kscr-SearchDetails-selection--selected util-Grid-cell" ng-if="hasSelectedAOs()" ng-class="{'kscr-SearchDetails-selection--complete' : selectedRegGroup, 'kscr-SearchDetails-selection--full' : selectedRegGroup.isFull }"><div class="kscr-SearchDetails-label" ng-if="!selectedRegGroup">{{selectedAOs.length}} of {{course.activityOfferingTypes.length}} activities selected</div><div class="kscr-SearchDetails-label" ng-if="selectedRegGroup && !singleRegGroup"><i class="kscr-SearchDetails-selection-icon"></i> <span>Section {{selectedRegGroup.code}}</span> <span ng-if="!selectedRegGroup.isFull">Selected</span> <span ng-if="selectedRegGroup.isFull"><span>Full</span> <span class="kscr-SearchDetails-selection-sublabel"><span ng-if="selectedRegGroup.isWaitlistAvailable && !selectedRegGroup.waitlistSeatsAvailable">({{selectedRegGroup.waitlistSeatsTaken}}<ng-pluralize count="selectedRegGroup.waitlistSeatsTaken" when="{'1': 'student', 'other': 'students'}"></ng-pluralize>on waitlist)</span> <span ng-if="selectedRegGroup.isWaitlistAvailable && selectedRegGroup.waitlistSeatsAvailable">({{selectedRegGroup.waitlistSeatsAvailable - selectedRegGroup.waitlistSeatsTaken}}/{{selectedRegGroup.waitlistSeatsAvailable}} waitlist spots available)</span> <span ng-if="!selectedRegGroup.isWaitlistAvailable">(No waitlist offered)</span></span></span></div><div class="kscr-SearchDetails-single-selection" ng-if="selectedRegGroup && singleRegGroup">Section {{selectedRegGroup.code}}</div><a class="kscr-SearchDetails-selection-clear" ng-click="clearSelectedAOs()" ng-if="!singleRegGroup"><ng-pluralize count="selectedAOs.length" when="{'1': 'Clear Selection', 'other': 'Clear Selections'}"></ng-pluralize></a></div><!-- Actions --><div class="kscr-SearchDetails-actions"><form novalidate name="form" ng-submit="submitAction()"><!-- Add to Cart / Waitlist - Only if not in cart || waitlist already --><div class="kscr-SearchDetails-button" ng-if="!isSelectedRegGroupInCart() && !isSelectedRegGroupInWaitlist()"><!-- Add to Cart - Only if course is not full || (course is full & waitlist is not available (shown as disabled)) --><button id="search_details_add_to_cart" name="submit" class="kscr-Button" ng-disabled="!selectedRegGroup || (selectedRegGroup.isFull && !selectedRegGroup.isWaitlistAvailable)" ng-if="!selectedRegGroup || !selectedRegGroup.isFull || !selectedRegGroup.isWaitlistAvailable">Add to Cart</button> <!-- Add to Waitlist - Only if reg group is selected, not in waitlist, course is full, && waitlist is available --> <button id="search_details_add_to_waitlist" name="submit" class="kscr-Button" ng-disabled="!selectedRegGroup" ng-if="selectedRegGroup && selectedRegGroup.isFull && selectedRegGroup.isWaitlistAvailable">Add to Waitlist</button></div><!-- In Cart / Waitlist - Only if in cart / waitlist --><div class="kscr-SearchDetails-button" ng-if="isSelectedRegGroupInCart()"><button id="search_details_in_cart" class="kscr-Button--outline" ng-disabled="true">In Cart</button></div><div class="kscr-SearchDetails-button" ng-if="isSelectedRegGroupInWaitlist()"><button id="search_details_in_waitlist" class="kscr-Button--outline" ng-disabled="true">In Waitlist</button></div></form><div class="kscr-SearchDetails-actionMessage" ng-if="actionStatus" ng-class="{'kscr-SearchDetails-actionMessage--{{actionStatus}}' : actionStatus}"><i class="kscr-SearchDetails-actionMessage-icon"></i> <a class="kscr-SearchDetails-actionMessage-remove" ng-click="removeActionMessage()"></a> <span ng-if="actionStatus === 'success'">Added</span> <span ng-if="actionStatus === 'error'">Failed to add</span> <strong>{{course.courseOfferingCode}}</strong> to <span ng-if="actionType === 'cart'">cart</span> <span ng-if="actionType === 'waitlist'">waitlist</span></div></div></div><!-- Activity Offering Table (single reg group) --><div class="kscr-SearchDetails-activityOfferingGroups" ng-if="singleRegGroup"><div class="kscr-SearchDetails-activityOfferingGroup"><div class="kscr-SearchDetails-activityOfferings"><search-results><search-column name="Activity" field="activityOfferingTypeName" order="1"></search-column><search-column name="Days" field="formatted.days" order="2"></search-column><search-column name="Time" field="formatted.time" order="3"></search-column><search-column name="Instructor" field="formatted.instructor" order="4"></search-column><search-column name="Location" field="formatted.location" order="5"></search-column><search-column name="Seats Open" field="formatted.seatsOpen" order="6"></search-column><search-column name="Additional Info" field="formatted.additionalInfo" sortable optional="true" order="7"></search-column><search-list search-data="selectedAOs" preprocessor="aoFormatter" search-columns="searchColumns" default-field="formatted.aoId" display-limit="999"></search-list></search-results></div></div></div><!-- Activity Offering Tables (multiple reg groups) --><div class="kscr-SearchDetails-activityOfferingGroups" ng-if="!singleRegGroup"><div class="kscr-SearchDetails-activityOfferingGroup" ng-repeat="aoType in course.activityOfferingTypes"><div id="{{aoType.activityOfferingTypeName}}_details_heading" class="kscr-SearchDetails-label">{{aoType.activityOfferingTypeName}}<ng-pluralize count="aoType.activityOfferings.length" when="{'1' : '', 'other': 's'}"></ng-pluralize><span ng-if="isAOTypeSelected(aoType)">(Selected)</span> <span ng-if="!isAOTypeSelected(aoType) && !hasSelectedAOs()">({{aoType.activityOfferings.length}})</span> <span ng-if="!isAOTypeSelected(aoType) && hasSelectedAOs()">({{countEligibleAOs(aoType.activityOfferings)}} of {{aoType.activityOfferings.length}} eligible) <a ng-click="aoType.showAll = !aoType.showAll; updateAOStates();" ng-show="aoType.activityOfferings.length > 1"><span ng-if="!aoType.showAll">Show All</span> <span ng-if="aoType.showAll">Hide ineligible</span></a></span></div><div class="kscr-SearchDetails-activityOfferings"><search-results><search-column name="Days" field="formatted.days" order="1"></search-column><search-column name="Time" field="formatted.time" order="2"></search-column><search-column name="Instructor" field="formatted.instructor" order="3"></search-column><search-column name="Location" field="formatted.location" order="4"></search-column><search-column name="Seats Open" field="formatted.seatsOpen" order="5"></search-column><search-column name="Additional Info" field="formatted.additionalInfo" sortable optional="true" order="6"></search-column><search-column name="Select" checkbox="true" sortable order="7"></search-column><search-list search-data="aoType.activityOfferings" preprocessor="aoFormatter" search-columns="searchColumns" on-click="toggleAO" default-field="formatted.aoId" display-limit="999" prefix="{{aoType.activityOfferingTypeName}}_"></search-list></search-results></div></div></div></div></div>