<div class="kscr-Responsive-cartWrapper" ng-class="{ 'kscr-Responsive-cartWrapper--active' : uiState == 'root.cart' }"><div id="kscr-CartHeading"><!--My Cart Main Heading--><div class="kscr-MainHeading kscr-MainHeading-icons util-Grid util-Grid--center"><div class="util-Grid-cell"><div class="kscr-MainHeading-icon-left"><a ui-sref="root.search"><i class="glyphicon glyphicon-search"></i></a></div><div class="kscr-MainHeading-header">My Cart</div><div class="kscr-MainHeading-icon-right"><a ui-sref="root.schedule"><i class="glyphicon glyphicon-calendar"></i></a></div></div></div><!-- Sticky Cart Summary & Registration Action --><div sticky="" class="kscr-MainHeading-CartHeading"><div class="kscr-MainHeading util-Grid util-Grid--center" ng-hide="showConfirmation || states.processing.indexOf(cartResults.state) !== -1"><div class="util-Grid-cell"><div class="kscr-MainHeading-header kscr-MainHeading-stickyHeader">My Cart</div><div id="credit_count_title" class="kscr-MainHeading-support"><strong><ng-pluralize count="cart.items.length" when="{'1': '{} course', 'other': '{} courses'}"></ng-pluralize></strong> (<ng-pluralize count="creditTotal" when="{'1': '{} credit', 'other': '{} credits'}"></ng-pluralize>)</div><div id="credit_count_title_large" class="kscr-MainHeading-support"><ng-pluralize count="creditTotal" when="{'1': '{} CREDIT', 'other': '{} CREDITS'}"></ng-pluralize></div></div><div><button id="register" ng-disabled="cart.items.length < 1" class="kscr-MainHeading-button kscr-Button--primary" type="button" ng-click="showConfirmation =!showConfirmation">Register</button></div></div><div class="kscr-MainHeading" ng-show="states.processing.indexOf(cartResults.state) !== -1"><div id="registering_message" class="kscr-MainHeading-header--processing">Registering for courses...</div></div><form ng-submit="register()"><!-- Registration Confirmation Box--><div ng-show="showConfirmation" class="kscr-Confirmation-container"><div class="kscr-Confirmation-header util-Grid"><ng-pluralize count="cart.items.length" when="{  '1'    : 'Register for the course below?',
                                     'other': 'Register for the courses below?'}"></ng-pluralize></div><div class="util-Grid"><span class="kscr-Confirmation-buttons util-Grid-cell"><button id="confirmRegistration" class="kscr-Button--primary" type="submit" focus-me="showConfirmation">Confirm Registration</button><div class="global-Base-divider"></div><button id="cancelRegistration" class="kscr-Button" type="button" ng-click="showConfirmation = !showConfirmation">Cancel</button></span></div></div></form></div></div><div class="kscr-addToCart"><div ng-click="isCollapsed = !isCollapsed" class="kscr-addToCart-heading"><span class="kscr-Card-icon"><i class="glyphicon" ng-class="{'glyphicon-chevron-down': !isCollapsed, 'glyphicon-chevron-right': isCollapsed}"></i></span><div class="kscr-addToCart-header" id="add_to_cart">Add to Cart</div></div><!--My Cart Input Boxes and Add to Cart Button --><div collapse="isCollapsed" class="kscr-addToCart-contents"><form novalidate name="form" ng-submit="addRegGroupToCart();"><fieldset><div class="util-Grid"><div class="util-Grid-cell"><input placeholder="CHEM237" id="courseCode" class="kscr-addToCart-input" type="text" size="9" maxlength="8" ng-model="courseCode" focus-once="courseAdded"></div><div class="util-Grid-cell"><input placeholder="1001" id="regCode" class="kscr-addToCart-input" type="text" size="4" maxlength="4" ng-model="regCode"></div><div class="util-Grid-cell kscr-addToCart-button"><button id="submit" name="submit" class="kscr-Button">Add to Cart</button></div></div><div class="util-Grid"><div class="util-Grid-cell"><label for="courseCode" class="kscr-addToCart-label">Course Code</label></div><div class="util-Grid-cell"><label for="regCode" class="kscr-addToCart-label">Section</label></div><div class="util-Grid-cell"></div></div></fieldset></form></div></div><!--Alert message--><div id="user_message" class="util-Alert util-Alert--{{userMessage.type}}" ng-if="userMessage.txt"><span class="kscr-Card-statusRemove"><a href="" ng-click="removeUserMessage()"></a></span> <span class="kscr-Card-statusUndo" ng-if="userMessage.linkText" ng-click="invokeActionLink(userMessage.actionLink)"><a href="" title="Undo"></a></span> <span ng-bind-html="userMessage | formatValidationMessage"></span><div class="kscr-Card-buttons" ng-if="userMessage.linkText"><button id="userMessageInvoke" class="kscr-Button" type="button" ng-click="invokeActionLink(userMessage.actionLink)">{{userMessage.linkText}}</button></div></div><div class="kscr-Card kscr-Card-Cart"><div ng-repeat="cartItem in cart.items" is-open="isopen" class="kscr-Course-container kscr-Course-course{{courseIndex(cartItem)}}"><div id="cartItem_status_message" class="util-Alert--card util-Alert--{{cartItem.alertMessage.type}}" ng-if="cartItem.alertMessage.txt">{{cartItem.alertMessage.txt}} <span class="kscr-Card-statusRemove"><a href="" ng-click="removeAlertMessage(cartItem)"></a></span></div><course-accordion course="cartItem" type="{{courseTypes.cart}}" card-index="$index" cart-id="cart.cartId"></course-accordion></div></div><div class="kscr-Card kscr-Card-Results" ng-show="cartResults.items.length"><div class="kscr-Heading-sub kscr-cartResult-responseHeading" ng-class="{'kscr-cartResult-responseHeading--success' : (cartResults.successCount > 0),
                        'kscr-cartResult-responseHeading--waitlisted' : (cartResults.waitlistedCount > 0),
                        'kscr-cartResult-responseHeading--waitlist' : (cartResults.waitlistCount > 0),
                        'kscr-cartResult-responseHeading--fail' : (cartResults.errorCount > 0)}"><span class="kscr-cartResult-responseLabel">Results</span> <span class="kscr-cartResult-responseCount"><span ng-if="cartResults.successCount > 0" class="kscr-cartResult-responseCount--success">{{cartResults.successCount}}</span> <span ng-if="cartResults.waitlistedCount > 0" class="kscr-cartResult-responseCount--waitlisted">{{cartResults.waitlistedCount}}</span> <span ng-if="cartResults.waitlistCount > 0" class="kscr-cartResult-responseCount--waitlist">{{cartResults.waitlistCount}}</span> <span ng-if="cartResults.errorCount > 0" class="kscr-cartResult-responseCount--fail">{{cartResults.errorCount}}</span></span> <span class="util-Grid--clearfix"></span></div><div id="resultsSection" class="panel-group"><div ng-repeat="cartResultItem in cartResults.items" is-open="isopen" class="panel kscr-cartResult-item kscr-Card-status kscr-Card-status--{{cartResultItem.status}}"><div class="kscr-Card-icon">&nbsp;</div><!-- Displays block with course info if course is not waitlisted --><div class="kscr-cartResult-content" ng-if="cartResultItem.status != statuses.waitlist"><!--credits--><div class="kscr-cartResult-supportText"><ng-pluralize count="cartResultItem.credits" when="{'1': '{} cr', 'other': '{} cr'}"></ng-pluralize></div><!--Course Header Section--><div class="ng-scope kscr-cartResult-heading"><span class="kscr-Card-title-alert" id="course_code_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}">{{cartResultItem.courseCode}} ({{cartResultItem.regGroupCode}}) {{getStatusMessageFromStatus(cartResultItem.status)}}</span></div><ng-include src="'aoInfo.html'"></ng-include><div ng-if="cartResultItem.statusMessages && (cartResultItem.status != statuses.success) && (cartResultItem.status != statuses.processing)" id="result_status_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}" class="kscr-Card-detailsText kscr-Card-detailsText--{{cartResultItem.status}}" ng-show="cartResultItem.statusMessages"><div class="kscr-Card-reason"><div class="kscr-Card-reason-label"><strong>Reason:</strong></div><div class="kscr-Card-reason-messages"><div class="kscr-Card-reason-message" ng-repeat="message in cartResultItem.statusMessages"><span id="reason_message_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}" ng-bind-html="message | formatValidationMessage:cartResultItem"></span></div></div></div></div><!-- All Error cards must provide the ability to add the item back into the cart --><div class="kscr-Card-buttons"><div class="kscr-Card-button" ng-if="(cartResultItem.status == statuses.error)"><span><!-- Add to cart, then remove the result item--><button class="kscr-Button" id="addBackToCart_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}" ng-click="addCartItemToCart(cartResultItem);  removeCartResultItem($index);">Keep in Cart</button></span></div><div class="kscr-Card-button" ng-if="cartResultItem.statusMessages && (cartResultItem.status == statuses.action)"><span><button class="kscr-Button" id="waitlist_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}" ng-click="addCartItemToWaitlist(cartResultItem)">Add to Waitlist</button></span></div><!--Continue Registration--><!--initial implementation, still needs to be wired up--><div class="kscr-Card-button" ng-if="cartResultItem.statusMessages && (allowRepeatedCourses)"><span><button class="kscr-Button" id="continueRegistration_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}" ng-click="addCartItemToSchedule(cartResultItem)">Continue Registration</button></span></div><!-- Dismiss Button--><div class="kscr-Card-button"><span><button class="kscr-Button" id="course_remove_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}" ng-click="removeCartResultItem($index)">Dismiss</button></span></div></div></div><!-- Displays block with course info if course is waitlisted (even though it technically "failed" we display it as "success" that it was added to waitlist) --><div class="kscr-cartResult-content" ng-if="cartResultItem.status == statuses.waitlist"><div class="ng-scope kscr-cartResult-heading"><span class="kscr-Card-title-alert" id="waitlisted_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}">Added to Waitlist</span></div><div class="kscr-Card-text-alert" id="waitlisted_message_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}">{{cartResultItem.waitlistMessage}}</div><div class="kscr-Card-detailsText kscr-Card-detailsText--waitlist"><div class="ng-scope"><span class="kscr-Card-title-alert" id="waitlisted_course_code_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}">{{cartResultItem.courseCode}} ({{cartResultItem.regGroupCode}})</span></div><ng-include src="'aoInfo.html'"></ng-include></div><div class="kscr-Card-buttons"><!-- Dismiss Button--><div class="kscr-Card-button"><span><button class="kscr-Button" id="course_remove_{{cartResultItem.courseCode}}_{{cartResultItem.regGroupCode}}" ng-click="removeCartResultItem($index)">Dismiss</button></span></div></div></div></div></div></div><script type="text/ng-template" id="aoInfo.html"><div class="kscr-Card-text-alert">
            <div ng-repeat="item in cartResultItem.schedule">
                <span class="kscr-Card-courseTimes--results">
                    <div class="kscr-Card-ao-type">{{item.activityOfferingTypeName | limitTo : 3}}</div>
                    <div ng-repeat="scheduleItem in item.activityOfferingLocationTime" class="kscr-Card-scheduleComponent">
                        <span ng-hide="scheduleItem.isTBA" class="util-Grid--floatLeft">{{scheduleItem.time.days}} {{scheduleItem.time.displayTime}}</span>
                        <span ng-hide="scheduleItem.isTBA" class="util-Grid--floatRight">{{scheduleItem.location.building}} {{scheduleItem.location.room}}</span>
                        <span ng-show="scheduleItem.isTBA" class="util-Grid--floatRight">TBA</span>
                    </div>
                    <div class="util-Grid--clearfix"></div>
                </span>
            </div>
        </div></script></div>