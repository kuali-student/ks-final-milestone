<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="CourseDetails-FormView" parent="CourseDetails-FormView-parent"/>
    <bean abstract="true" id="CourseDetails-FormView-parent" parent="KSAPBaseFormView">
        <property name="viewHelperServiceClass"
                  value="org.kuali.student.ap.coursesearch.service.impl.CourseDetailsViewHelperServiceImpl"/>
        <property name="id" value="CourseDetails-FormView"/>
        <property name="cssClasses">
            <list merge="true">
                <value>ksap-view</value>
            </list>
        </property>
        <property name="additionalCssFiles">
            <list>
                <value>themes/ksapboot/stylesheets/ksap.coursedetails.css</value>
            </list>
        </property>
        <property name="additionalScriptFiles">
            <list>
                <value>themes/ksapboot/scripts/ksap.search.details.js</value>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="Ksap-Page" p:id="coursedetails-page">
                    <property name="cssClasses">
                        <list merge="true">
                        </list>
                    </property>
                    <property name="layoutManager">
                        <bean parent="Uif-VerticalBoxLayout"/>
                    </property>
                    <property name="items">
                        <list>
                            <bean parent="Uif-HeaderThree"
                                  p:headerText="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getFormattedMessage('details.course.section.title', new Object[]{courseCode})}"/>
                            <ref bean="course-term-list"/>
                        </list>
                    </property>
                    <property name="stickyFooter" value="false"/>
                </bean>
            </list>
        </property>
        <property name="footer.render" value="false"/>
        <property name="persistFormToSession" value="false"/>
        <property name="formClass" value="org.kuali.student.ap.coursesearch.form.CourseSectionDetailsForm"/>
    </bean>
    <bean id="course-term-list" parent="course-term-list-parent">
        <property name="cssClasses">
            <list merge="true">
                <value>ksap-course-sections</value>
            </list>
        </property>
    </bean>
    <bean id="course-term-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.CourseTermDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="courseTermDetailsWrappers"/>
        <!-- Disclosure items REQUIRE a summary title to work correctly -->
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.header.additionalCssClasses"
                  value="@{#line.getTermAbbreviation()}"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.id" value="@{#line.getTermId()}_disclosure"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.renderIcon" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.collapsedIconClass"
                  value="ks-fontello-icon-right-open"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.expandedIconClass"
                  value="ks-fontello-icon-down-open"/>
        <property name="layoutManager.summaryTitle"
                  value="@{#line.termName} [css='ksap-text-small']@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getFormattedMessage(#line.courseOfferingDetailsWrappers.size() == 1 ? 'details.term.coSummary.1' : 'details.term.coSummary.many', new Object[]{#line.courseOfferingDetailsWrappers.size()})}[/css]"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.defaultOpen" value="@{#index==0}"/>
        <property name="subCollections">
            <list>
                <ref bean="course-offering-list"/>
            </list>
        </property>
    </bean>
    <bean id="course-offering-list" parent="course-offering-list-parent"/>
    <bean id="course-offering-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.CourseOfferingDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="courseOfferingDetailsWrappers"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.render" value="true"/>
        <!-- The below finalizeMethodToCall will handle turning on/off the rendering of the disclosure based on how many COs there are "/>-->
        <property name="layoutManager.lineGroupPrototype.disclosure.finalizeMethodToCall" value="determineDisclosureRendering"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.renderIcon" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.collapsedIconClass"
                  value="ks-fontello-icon-right-open"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.expandedIconClass"
                  value="ks-fontello-icon-down-open"/>
        <property name="layoutManager.summaryTitle"
        value="@{#line.courseOfferingCode} - @{#line.courseOfferingTitle} [css='ksap-section-planned ks-fontello-icon-ok-circled']planned[/css]"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.defaultOpen" value="false"/>
        <property name="cssClasses">
            <list merge="true">
                <value>ksap-section-courses</value>
            </list>
        </property>
        <property name="onDocumentReadyScript" value="checkboxSelectAndHighlight();"/>
        <!-- property to activate disclosure -->
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:render="@{#line.honors}"
                      p:messageText="[b]@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.course.honors.label')}[/b]">
                    <property name="cssClasses">
                        <list merge="true">
                            <value>ksap-section-honors</value>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-MessageField" p:render="@{#line.courseRequisites.size() > 0}"
                      p:messageText="[b]@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.course.requisites.label')}:[/b] @{#line.courseRequisites}">
                    <property name="cssClasses">
                        <list merge="true">
                            <value>ksap-section-requisites</value>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-MessageField"
                      p:messageText="[b]@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.course.description.label')}:[/b] @{#line.courseOfferingDescription}">
                    <property name="cssClasses">
                        <list merge="true">
                            <value>ksap-section-description</value>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="planned-activities-list"/>
                <ref bean="format-offering-list"/>
            </list>
        </property>
    </bean>
    <bean id="format-offering-list" parent="format-offering-list-parent"/>
    <bean id="format-offering-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.ActivityFormatDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="false"/>
        <property name="propertyName" value="activityFormatDetailsWrappers"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <!-- property to activate disclosure -->
        <property name="cssClasses">
            <list merge="true">
                <value>ksap-section-format</value>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="@{#line.formatName} (@{#line.activityOfferingDetailsWrappers.size()})">
                    <property name="cssClasses">
                        <list merge="true">
                            <value>ksap-section-format-title</value>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="activity_offering_table"/>
            </list>
        </property>
    </bean>

    <bean id="planned-activities-list" parent="activities-list-with-group-summary"
          p:propertyName="plannedActivityDetailsWrappers" p:renderHeader="true">
        <property name="headerText"
                  value="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getFormattedMessage('details.regGroup.header', new Object[]{#parentLine.plannedGroupsCount})}"/>
        <property name="cssClasses">
            <list merge="true">
                <value>ksap-section-reg</value>
            </list>
        </property>
    </bean>

    <bean id="activities-list-with-group-summary" parent="activity_offering_table_parent">
        <property name="layoutManager.groupingTitle"
                  value="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getFormattedMessage('details.regGroup.code', new Object[]{#line.regGroupCode})}"/>
        <property name="layoutManager.groupingPropertyNames">
            <list>
                <value>regGroupCode</value>
            </list>
        </property>
    </bean>

    <bean id="activity_offering_table" parent="activity_offering_table_parent"/>

    <bean id="activity_offering_table_parent" parent="Uif-TableCollectionSubSection"
          p:renderAddLine="false" p:renderLineActions="false" p:renderHeader="false">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.ActivityOfferingDetailsWrapper"/>
        <property name="propertyName" value="activityOfferingDetailsWrappers"/>
        <property name="layoutManager.renderSequenceField" value="false"/>
        <property name="layoutManager.applyDefaultCellWidths" value="false"/>
        <property name="layoutManager.applyAlternatingRowStyles" value="false"/>
        <property name="validationMessages" ref="KS-ValidationMessages-Off"/>
        <property name="layoutManager.richTable">
            <bean parent="KS-Uif-RichTable"/>
        </property>
        <property name="layoutManager.richTable.templateOptions">
            <map merge="true">
                <!--<entry key="sDom" value="opir"/>-->
                <!--<entry key="aaSorting" value="[[0, 'asc']]"/>-->
                <entry key="bPaginate" value="false"/>
                <entry key="bAutoWidth" value="false"/>
                <entry key="bFilter" value="false"/>
                <entry key="bInfo" value="false"/>
            </map>
        </property>
        <property name="layoutManager.richTable.disableTableSort" value="true"/>
        <property name="items">
            <list>
                <!--p:label="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.type')}"-->
                <bean parent="Uif-MessageField"
                      p:additionalCssClasses="ksap-section-type"
                      p:id="type"
                      p:label="Type"
                      p:messageText="@{#line.activityFormatName}"
                      p:render="@{#line.partOfRegGroup==true}">
                </bean>
                <!--p:label="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.code')}"-->
                <bean parent="Uif-MessageField"
                      p:additionalCssClasses="ksap-section-code"
                      p:id="code"
                      p:label="Code"
                      p:messageText="@{#line.activityOfferingCode}">
                </bean>
                <!--p:label="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.instructor')}" p:additionalCssClasses="nowrap"-->
                <bean parent="Uif-DataField"
                      p:additionalCssClasses="ksap-section-instructor"
                      p:id="instructor"
                      p:label="Instructor"
                      p:propertyName="instructorName">
                </bean>
                <!--p:label="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.days')}"-->
                <bean parent="Uif-MessageField"
                      p:additionalCssClasses="ksap-section-days"
                      p:id="days"
                      p:label="Days"
                      p:messageText="@{#line.days}">
                </bean>
                <!--p:label="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.time')}"-->
                <bean parent="Uif-MessageField"
                      p:additionalCssClasses="ksap-section-time"
                      p:id="time"
                      p:label="Time"
                      p:messageText="@{#line.time}">
                </bean>
                <!--p:label="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.location')}"-->
                <bean parent="Uif-MessageField"
                      p:additionalCssClasses="ksap-section-location"
                      p:id="location"
                      p:label="Location"
                      p:messageText="@{#line.location}">
                </bean>
                <!--p:label="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.seats')}"-->
                <bean parent="Uif-MessageField"
                      p:additionalCssClasses="ksap-section-seats"
                      p:id="seats"
                      p:label="Seats Open"
                      p:messageText="@{#line.currentEnrollment}/@{#line.maxEnrollment}">
                </bean>
                <!--@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.additionalDetails')} -->
                <bean parent="Uif-FieldGroupBase"
                      p:fieldLabel.labelText="Additional Details"
                      p:id="additionalDetails"
                      p:additionalCssClasses="ksap-section-details">
                    <property name="items">
                        <list>
                            <bean parent="Uif-Message" p:render="@{#line.honors==true}" p:id="honors"
                                  p:additionalCssClasses="ksap-section-details-item"
                                  p:messageText="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.additionalDetails.honors')}"/>
                            <bean parent="Uif-Link" p:render="@{#line.classUrl != null}" p:id="classUrl"
                                  p:additionalCssClasses="ksap-section-details-item"
                                  p:href="@{#line.classUrl}"
                                  p:linkText="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.additionalDetails.courseUrl')}"/>
                            <bean parent="Uif-Link" p:render="@{#line.requirementsUrl != null}" p:id="requirementsUrl"
                                  p:additionalCssClasses="ksap-section-details-item"
                                  p:href="@{#line.requirementsUrl}"
                                  p:linkText="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.additionalDetails.restrictions')}"/>
                        </list>
                    </property>
                </bean>
                <!--@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.ao.header.select')}" >-->
                <bean parent="Uif-InputField"
                      p:additionalCssClasses="ksap-section-select"
                      p:propertyName="selected"
                      p:id="select"
                      p:label="Select"
                      p:render="@{#line.partOfRegGroup==false and #line.singleFormatOffering==false}">
                    <property name="control">
                        <bean parent="Uif-CheckboxControl">
                            <property name="onChangeScript" value="alert('checkbox clicked')"/>
                        </bean>
                    </property>
                </bean>
                <bean parent="Uif-FieldGroupBase"
                      p:additionalCssClasses="ksap-section-add"
                      p:fieldLabel.labelText="Add to Plan"
                      p:render="@{#line.singleFormatOffering==true}">
                    <property name="items">
                        <list>
                            <bean parent="Uif-Link" p:render="@{#line.singleFormatOffering==true}"
                                 p:cssClasses="ks-fontello-icon-hollow-circled-plus"
                                  p:href="http://www.kuali.org" p:linkText=""/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

</beans>
