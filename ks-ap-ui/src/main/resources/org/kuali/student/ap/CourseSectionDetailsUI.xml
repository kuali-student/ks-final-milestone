<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<bean id="CourseDetails-FormView" parent="CourseDetails-FormView-parent" />
	<bean abstract="true" id="CourseDetails-FormView-parent" parent="KSAPBaseFormView">
		<property name="viewHelperServiceClass" value="org.kuali.student.ap.coursedetails.CourseDetailsViewHelperServiceImpl" />
        <property name="id" value="CourseDetails-FormView" />
		<property name="cssClasses">
			<list merge="true">
				<value>ksap-view</value>
			</list>
		</property>
		<property name="additionalScriptFiles">
			<list>
			</list>
		</property>
		<property name="items">
			<list>
				<bean parent="Ksap-Page" p:id="coursedetails-page">
                    <property name="cssClasses">
						<list merge="true">
						</list>
					</property>
					<property name="layoutManager">
						<bean parent="Uif-VerticalBoxLayout" />
					</property>
					<property name="items">
						<list>
                            <bean parent="Uif-MessageField" p:messageText="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getFormattedMessage('details.course.sestion.title', new Object[]{courseCode})}" />
                            <ref bean="course-term-list"/>
						</list>
					</property>
                    <property name="stickyFooter" value="false"/>
				</bean>
			</list>
		</property>
		<property name="footer.render" value="false" />
        <property name="persistFormToSession" value="false"/>
		<property name="formClass" value="org.kuali.student.ap.coursesearch.form.CourseSectionDetailsForm" />
	</bean>
    <bean id="course-term-list" parent="course-term-list-parent"/>
    <bean id="course-term-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.CourseTermDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="courseTermDetailsWrappers"/>
        <!-- Disclosure items REQUIRE a summary title to work correctly -->
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.renderIcon" value="true"/>
        <property name="layoutManager.summaryTitle" value="@{#line.termName} @{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getFormattedMessage('details.term.coSummary', new Object[]{#line.courseOfferingDetailsWrappers.size()})}"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.defaultOpen" value="false"/>
        <property name="subCollections">
            <list>
                <ref bean="course-offering-list" />
            </list>
        </property>
    </bean>
    <bean id="course-offering-list" parent="course-offering-list-parent"/>
    <bean id="course-offering-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.CourseOfferingDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="courseOfferingDetailsWrappers"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.renderIcon" value="true"/>
        <property name="layoutManager.summaryTitle" value="@{#line.courseOfferingCode} - @{#line.courseOfferingTitle}"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.defaultOpen" value="false"/>
        <!-- property to activate disclosure -->
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:fieldLabel.labelText="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.course.description.label')}"
                      p:messageText="@{#line.courseOfferingDescription}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="format-offering-list" />
            </list>
        </property>
    </bean>
    <bean id="format-offering-list" parent="format-offering-list-parent"/>
    <bean id="format-offering-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.FormatOfferingDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="formatOfferingDetailsWrappers"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <!-- property to activate disclosure -->
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="@{#line.formatName}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="activity_offering_list" />
            </list>
        </property>
    </bean>
    <bean id="activity_offering_list" parent="activity_offering_list_parent"/>
    <bean id="activity_offering_list_parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.ActivityOfferingDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="activityOfferingDetailsWrappers"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <!-- property to activate disclosure -->
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="Activity goes here!"/>
                <bean parent="Uif-MessageField" p:messageText="@{#line.activityOfferingId}"/>
                <bean parent="Uif-MessageField" p:messageText="@{#line.activityOfferingCode}"/>

            </list>
        </property>
    </bean>
</beans>
