<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="QuickAdd-FormView" parent="MyPlanBaseFormView">
        <property name="id" value="QuickAdd-FormView"/>
        <property name="breadcrumbs.render" value="false"/>
        <property name="applyDirtyCheck" value="false"/>
        <property name="header.render" value="false"/>
        <property name="cssClasses">
            <list merge="true">
                <value>base-view</value>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-Page" p:id="quickAdd_dialog_page">
                    <property name="cssClasses">

                        <list merge="true">
                            <value>fl-container-360</value>
                        </list>
                    </property>
                    <property name="layoutManager">
                        <bean parent="Uif-VerticalBoxLayout"/>
                    </property>
                    <property name="items">
                        <list>
                            <ref bean="quick_add_dialog"/>
                        </list>
                    </property>
                </bean>
                <ref bean="quick_add_action_response_page"/>
            </list>
        </property>
        <property name="footer.render" value="false"/>
        <property name="formClass" value="org.kuali.student.myplan.quickAdd.form.QuickAddForm"/>
    </bean>


    <bean id="quick_add_action_response_page" parent="Uif-Page" p:id="quick_add_action_response_page">
        <property name="validationMessages">
            <bean parent="Uif-GroupValidationMessages">
                <property name="displayMessages" value="true"/>
                <property name="displayFieldLabelWithMessages" value="false"/>
            </bean>
        </property>
        <property name="items">
            <list>
                <ref bean="quick_add_actions_response"/>
            </list>
        </property>
    </bean>
    <bean id="quick_add_actions_response" parent="Uif-VerticalBoxSection">
        <property name="items">
            <list>
                <bean id="request_status_item_key" parent="Uif-DataField" p:propertyName="requestStatus"/>
                <bean id="json_events_item_key" parent="Uif-DataField" p:propertyName="javascriptEventsAsJSON"/>
            </list>
        </property>
    </bean>

    <bean id="quick_add_title" parent="Uif-HorizontalBoxSubSection">
        <property name="items">
            <list>
                <bean parent="Uif-Message"
                      p:messageText="Enter the course code">
                </bean>
                <bean parent="Uif-Message"
                      p:messageText="e.g. ENGL 220" p:style="font-size: .9em; font-style: italic;">
                    <property name="cssClasses">
                        <list merge="true">
                            <value>fl-text-gray</value>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="quick_add_dialog" parent="Uif-VerticalBoxSubSection" p:headerText="Add a course to @{termYear}">
        <property name="items">
            <list>
                <ref bean="quick_add_title"/>
                <ref bean="quick_add_items"/>
                <bean id="hidden_temp" p:id="hidden_temp" parent="Uif-InputField" p:propertyName="atpId" p:fieldLabel.render="false" p:style="width: 300px;">
                    <property name="control">
                        <bean parent="Uif-HiddenControl"/>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
    <bean id="quick_add_items" parent="Uif-HorizontalBoxSubSection">
        <property name="items">
            <list>
                <ref bean="quick_add_text_box"/>
                <ref bean="quick_add_note"/>

            </list>
        </property>
    </bean>
    <bean id="quick_add_note" parent="Uif-HorizontalBoxSubSection" p:style="margin: 0px;">
        <property name="items">
            <list>
                <bean parent="Uif-Message" p:style="width:160px;"
                      p:messageText="Note: The course you selected MAY NOT be offered in your selected quarter. Check back when the Time Schedule is released.">
                    <property name="cssClasses">
                        <list merge="true">
                            <value>fl-font-size-80</value>
                            <value>fl-text-gray</value>

                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
    <bean id="quick_add_text_box" parent="Uif-VerticalBoxSubSection" p:style="margin: 0px;">
        <property name="cssClasses">
            <list merge="true">
                <value>myplan-quick-add-text-box</value>
            </list>
        </property>
        <property name="items">
            <list>
                <bean id="search_text_box" parent="Uif-InputField" p:propertyName="courseCd">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="22" p:maxLength="10">
                            <property name="onDocumentReadyScript" value="
                            	var form=jQuery('#search_text_box_control').parents('form');
                            	setupPage(false, form);
                            	jQuery('#search_text_box_control').focus();"/>
                            <property name="onKeyPressScript" value="
                                var code = (e.keyCode ? e.keyCode : e.which);
                                if (code == 13) { e.preventDefault(); jQuery('button#quickAddCourse').click(); }
                            "/>
                        </bean>
                    </property>
                </bean>

                <ref bean="quick_Add_actions"/>
            </list>
        </property>
    </bean>

    <bean id="quick_Add_actions" parent="Uif-VerticalBoxGroup"
          p:validationMessages.render="false">
        <property name="items">
            <list>
                <bean id="quick_Add_buttons" parent="Uif-HorizontalFieldGroup" p:fieldLabel.render="false"
                      p:group.validationMessages.render="false">
                    <property name="items">
                        <list>
                            <ref bean="quickAddCourse"/>
                            <ref bean="cancelQuickAddCourse"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="quickAddCourse" p:id="quickAddCourse" parent="Uif-PrimaryActionButton-Small" p:actionLabel="Add to Plan">
        <property name="actionScript"
                  value="
                var id = 'quick_Add_'+'@{atpId}'+'@{planType}';
                var tempId = id.replace(/\./g,'_');
                myplanAjaxSubmitQuickAdd(tempId,{ atpId:'@{atpId}',planType:'@{planType}'},'quickAddNewCourse',e);"/>
        <property name="onDocumentReadyScript" value="
                                    jQuery('#quickAddCourse')
                                        .subscribe('PLAN_ITEM_ADDED', function(data){
                                                fnCloseAllPopups();
                                        })
                                        .subscribe('ERROR', function(data){
                                            jQuery('#hidden_temp').hide().addClass(data.cssClass).html(data.message).fadeIn(250);

                                        });"/>
    </bean>
    <bean id="cancelQuickAddCourse" p:id="cancelQuickAddCourse" parent="Uif-SecondaryActionButton-Small" p:actionLabel="Cancel">
        <property name="actionScript" value="fnCloseAllPopups();"/>
    </bean>


</beans>
