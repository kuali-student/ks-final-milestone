<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!--
        UX : http://ux.ks.kuali.org.s3.amazonaws.com/wireframes/ENR/Complex%20Course%20Offerings/Sandbox/start.html
            CO: 4.0. AO:4.3

        These are HorizontalBoxSections containing toolbar in manage CO and AO pages.
    -->
    <bean id="KS-CourseOfferingManagement-CO-ToolBarSection" parent="Uif-HorizontalBoxSection">
        <property name="items">
            <list>
                <bean parent="KS-HorizontalBoxGroup-WithRPadding">
                    <property name="items">
                        <list>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Add-CO" parent="KS-CourseOfferingManagement-ToolBar-Add-parent" p:methodToCall="createCourseOffering" p:disabled="@{!enableAddButton}"/>
                        </list>
                    </property>
                </bean>
                <bean parent="KS-HorizontalBoxGroup-WithRPadding">
                    <property name="items">
                        <list>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Approve-CO" parent="KS-CourseOfferingManagement-ToolBar-Approve-parent" p:methodToCall="approveCOs" />
                        </list>
                    </property>
                </bean>
                <bean parent="KS-HorizontalBoxGroup-WithRPadding">
                    <property name="items">
                        <list>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Suspend-CO" parent="KS-CourseOfferingManagement-ToolBar-Suspend-parent" p:methodToCall="suspendCOs" p:render="false"/>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Cancel-CO" parent="KS-CourseOfferingManagement-ToolBar-Cancel-parent" p:methodToCall="cancelCOs"  p:render="false"/>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Reinstate-CO" parent="KS-CourseOfferingManagement-ToolBar-Reinstate-parent" p:methodToCall="reinstateCOs"  p:render="false"/>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Delete-CO" parent="KS-CourseOfferingManagement-ToolBar-Delete-parent"  p:methodToCall="deleteCOs"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>


    <bean id="KSCourseOfferingManagement-AO-ToolBarSection" parent="Uif-HorizontalBoxSection" p:render="@{!currentCourseOfferingWrapper.crossListed}">
        <property name="items">
            <list>
                <bean parent="KS-HorizontalBoxGroup-WithRPadding">
                    <property name="items">
                        <list>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Add-AO" parent="KS-CourseOfferingManagement-ToolBar-Add-parent" p:actionLabel="Add Activity"  p:disabled="false"
                                  p:performClientSideValidation="true" p:methodToCall="addActivityOfferings"
                                  p:actionScript="openPopupContent(e,'KS-CourseOfferingManagement-AddActivityOfferingPopupForm',{afterHidden:new function(){jQuery('#KS-CourseOfferingManagement-AddActivityOfferingPopupForm').find('input[type=text],select').val('');}});"/>
                        </list>
                    </property>
                </bean>
                <bean parent="KS-HorizontalBoxGroup-WithRPadding">
                    <property name="items">
                        <list>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Approve-AO" parent="KS-CourseOfferingManagement-ToolBar-Approve-parent" p:methodToCall="approveAOs" p:render="true"/>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Draft-AO" parent="KS-CourseOfferingManagement-ToolBar-Draft-parent" p:methodToCall="draftAOs" p:render="true"/>
                        </list>
                    </property>
                </bean>
                <bean parent="KS-HorizontalBoxGroup-WithRPadding">
                    <property name="items">
                        <list>
                            <!--<bean id="KS-CourseOfferingManagement-ToolBar-Copy-AO" parent="KS-CourseOfferingManagement-ToolBar-Copy" p:methodToCall="copyAOs" p:render="@{hasAO}"/>-->
                            <!--<bean id="KS-CourseOfferingManagement-ToolBar-Suspend-AO" parent="KS-CourseOfferingManagement-ToolBar-Suspend" p:methodToCall="suspendAOs" p:render="@{hasAO}"/>-->
                            <!--<bean id="KS-CourseOfferingManagement-ToolBar-Cancel-AO" parent="KS-CourseOfferingManagement-ToolBar-Cancel" p:methodToCall="cancelAOs" p:render="@{hasAO}"/>-->
                            <!--<bean id="KS-CourseOfferingManagement-ToolBar-Reinstate-AO" parent="KS-CourseOfferingManagement-ToolBar-Reinstate" p:methodToCall="reinstateAOs" p:render="@{hasAO}"/>-->
                            <bean id="KS-CourseOfferingManagement-ToolBar-Delete-AO" parent="KS-CourseOfferingManagement-ToolBar-Delete-parent" p:methodToCall="deleteAOs" p:render="true"/>
                        </list>
                    </property>
                </bean>
                <bean parent="KS-HorizontalBoxGroup-WithRPadding">
                    <property name="items">
                        <list>
                            <!--
                      <bean id="KS-CourseOfferingManagement-ToolBar-AddCluster" parent="KS-CourseOfferingManagement-ToolBar-AddCluster" p:methodToCall="addCluster" p:render="@{hasAO}" p:disabled="false"
                            p:actionScript="openPopupContent(e,'KS-CourseOfferingManagement-AddAOCPopupForm',{afterHidden:new function(){jQuery('#KS-CourseOfferingManagement-AddAOCPopupForm').find('input[type=text],select').val('');}});"/>
                            -->
                            <bean id="KS-CourseOfferingManagement-ToolBar-MoveTo" parent="KS-CourseOfferingManagement-ToolBar-MoveTo-parent" p:render="true" p:disabled="false" p:methodToCall="dummyReload"
                                  p:successCallback="openPopupContent(e,'KS-CourseOfferingManagement-MoveAOCPopupForm',{afterHidden:new function(){jQuery('#KS-CourseOfferingManagement-MoveAOCPopupForm').find('input[type=text],select').val('');}});"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-AddCluster-parent" parent="KS-CourseOfferingManagement-ToolBar-Button"
          p:onClickScript="toggleAddAOCButton('addAOCButton','privateClusterNamePopover_control');">
        <property name="actionLabel" value="Add Cluster"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/toolbar/add_cluster.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-MoveTo-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Move Activity"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/toolbar/move_to_cluster.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Add-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Add Course"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{enableAddButton ? #ConfigProperties['ks.externalizable.images.url']+'/toolbar/add_enabled.png' : #ConfigProperties['ks.externalizable.images.url']+'/toolbar/add_disabled.png'}"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Approve-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Approve"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/toolbar/approve_disabled.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Suspend-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Suspend"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/suspend_disabled.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Cancel-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Cancel"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/toolbar/cancel_disabled.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Reinstate-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Reinstate"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/toolbar/reinstate_disabled.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Delete-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Delete"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/toolbar/delete_disabled.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Draft-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Set as Draft"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/toolbar/draft_disabled.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Copy-parent" parent="KS-CourseOfferingManagement-ToolBar-Button">
        <property name="actionLabel" value="Copy"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.externalizable.images.url']}/copy_disabled.png"/>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ToolBar-Button" parent="Uif-SecondaryActionButton" p:disabled="true" abstract="true">
        <property name="actionImagePlacement" value="TOP"/>
        <property name="cssClasses">
            <list merge="true">
                <value>tree-bar-button</value>
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-AddActivityOfferingPopupForm" parent="Uif-HorizontalBoxSection">
        <!--<property name="render" value="@{enableAddButton and !currentCourseOfferingWrapper.crossListed}"/>-->
        <property name="hidden" value="true"/>
        <property name="cssClasses">
            <list>
                <value>uif-bubblepopup-content</value>
            </list>
        </property>
        <property name="style" value="margin-bottom:0;padding-left:10px;padding-right:10px;"/>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="formatOfferingIdForNewAO" p:label="Format Offering" p:labelPlacement="TOP" p:required="true" p:onChangeScript="refreshAddAODropdowns();">
                    <property name="readOnly" value="false"/>
                    <property name="control">
                        <bean parent="Uif-DropdownControl" p:disabled="@{!#root.editAuthz}"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.autogen.keyvalue.ARGFormatsForCreateAOKeyValues" p:addBlankOption="false" />
                    </property>
                </bean>
                <bean parent="Uif-InputField" p:id="activityOfferingTypeDropDown" p:propertyName="activityIdForNewAO" p:label="Activity Type" p:labelPlacement="TOP" p:required="true" p:forceSessionPersistence="true">
                    <!-- KRAD 2.2.0 Bug: class uif-boxLayoutHorizontalItem is removed on refresh: -->
                    <property name="cssClasses">
                        <list merge="true">
                            <value>uif-boxLayoutHorizontalItem</value>
                        </list>
                    </property>
                    <property name="readOnly" value="false"/>
                    <property name="control">
                        <bean parent="Uif-DropdownControl" p:disabled="@{!#root.editAuthz}"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.autogen.keyvalue.ARGActivitiesForCreateAOKeyValues" p:addBlankOption="false" />
                    </property>
                </bean>

                <bean parent="Uif-InputField" p:id="clusterDropDown" p:propertyName="clusterIdForNewAO" p:label="Cluster" p:labelPlacement="TOP" p:required="true" p:forceSessionPersistence="true">
                    <property name="readOnly" value="false"/>
                    <property name="control">
                        <bean parent="Uif-DropdownControl" p:disabled="@{!#root.editAuthz}"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.autogen.keyvalue.ARGClustersForCreateAOKeyValues" p:addBlankOption="false" />
                    </property>
                </bean>

                <bean parent="Uif-InputField" p:propertyName="noOfActivityOfferings" p:label="Quantity" p:labelPlacement="TOP" p:required="true" p:exclusiveMin="0">
                    <property name="readOnly" value="false"/>
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="3" p:disabled="@{!#root.editAuthz}"/>
                    </property>
                    <property name="validCharactersConstraint">
                      <bean parent="NumericPatternConstraint"/>
                    </property>
                </bean>
                <bean parent="Uif-SecondaryActionButton-Small">
                    <property name="style" value="margin-top:1.5em;"/>
                    <property name="actionLabel" value="Add"/>
                    <property name="successCallback" value="jQuery('div[id=KS-CourseOfferingManagement-AddActivityOfferingPopupForm]:gt(0)').detach();"/>
                    <property name="errorCallback" value="jQuery('div[id=KS-CourseOfferingManagement-AddActivityOfferingPopupForm]:gt(0)').detach();"/>
                    <property name="methodToCall" value="addActivityOfferings"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-AddAOCPopupForm" parent="Uif-HorizontalBoxSection">
        <!--<property name="render" value="@{enableAddButton and !currentCourseOfferingWrapper.crossListed}"/>-->
        <property name="hidden" value="true"/>
        <property name="cssClasses">
            <list>
                <value>uif-bubblepopup-content</value>
            </list>
        </property>
        <property name="style" value="margin-bottom:0;padding-left:10px;padding-right:10px;"/>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="formatOfferingIdForViewRG" p:label="Select Format" p:labelPlacement="TOP" p:required="true" >
                    <property name="control">
                        <bean parent="Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.autogen.keyvalue.ARGFormatsForCreateRGKeyValues" p:addBlankOption="false" />
                    </property>
                </bean>
                <bean parent="Uif-InputField"  p:id="privateClusterNamePopover" p:propertyName="privateClusterNamePopover" p:label="Private Name" p:labelPlacement="TOP" p:render="true" p:required="true">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="30"  p:maxLength="20" p:onKeyUpScript="toggleAddAOCButton('addAOCButton','privateClusterNamePopover_control');"/>
                    </property>
                </bean>
                <bean parent="Uif-InputField"  p:propertyName="publishedClusterNamePopover" p:label="Published Name" p:labelPlacement="TOP"  p:render="true">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="30"  p:maxLength="20"/>
                    </property>
                </bean>
                <bean parent="Uif-SecondaryActionButton-Small" p:id="addAOCButton" >
                    <property name="style" value="margin-top:1.5em;"/>
                    <property name="actionLabel" value="Add"/>
                    <property name="successCallback" value="jQuery('div[id=KS-CourseOfferingManagement-AddAOCPopupForm]:gt(0)').detach();"/>
                    <property name="errorCallback" value="jQuery('div[id=KS-CourseOfferingManagement-AddAOCPopupForm]:gt(0)').detach();"/>
                    <property name="methodToCall" value="addCluster"/>
                </bean>
            </list>
        </property>
    </bean>

    <!--Notes by Bonnie, hidden container is necessary here since we want to update the form   -->
    <!--including the content of the cluster list as well as enable/disable "Move" button based on certain conditions  -->
    <bean id="KS-CourseOfferingManagement-MoveAOCPopupContainer" parent="Uif-HorizontalBoxSection" p:hidden="true">
        <property name="items">
            <list>
                <ref bean="KS-CourseOfferingManagement-MoveAOCPopupForm"/>
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-MoveAOCPopupForm" parent="Uif-HorizontalBoxSection" p:forceSessionPersistence="true">
        <!--<property name="render" value="@{enableAddButton and !currentCourseOfferingWrapper.crossListed}"/>-->
        <!--<property name="hidden" value="true"/>-->
        <property name="cssClasses">
            <list>
                <value>uif-bubblepopup-content</value>
            </list>
        </property>
        <property name="style" value="margin-bottom:0;padding-left:10px;padding-right:10px;"/>
        <property name="items">
            <list>
                <bean id="clusterIDListForAOMove" parent="Uif-InputField" p:propertyName="clusterIdForAOMove"  p:label="Move selected offerings to" p:labelPlacement="TOP"
                      p:onChangeScript="toggleAddAOCButton('moveAOCButton','privateNameForMoveId_control');">
                    <property name="control">
                        <bean parent="Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.autogen.keyvalue.ARGListOfAOClustersForFOKeyValues" p:addBlankOption="false" />
                    </property>
                </bean>
                <bean p:id="foIdForAOMoveId" parent="Uif-DataField" p:propertyName="selectedFOIDForAOMove" p:label="Format Offering Id" p:labelPlacement="TOP" p:style="display:none;">
                </bean>
                <bean p:id="foNameForAOMoveId" parent="Uif-DataField" p:propertyName="selectedFONameForAOMove" p:label="Format Offering" p:labelPlacement="TOP" p:style="display:none; margin-right:15px;">
                </bean>
                <bean p:id="privateNameForMoveId" parent="Uif-InputField" p:propertyName="privateClusterNameForMovePopover" p:label="Private Name" p:labelPlacement="TOP" p:render="true" p:required="true" p:style="display:none">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="30" p:maxLength="20" p:onKeyUpScript="toggleAddAOCButton('moveAOCButton','privateNameForMoveId_control');"/>
                    </property>
                </bean>
                <bean p:id="publishedNameForMoveId" parent="Uif-InputField"  p:propertyName="publishedClusterNameForMovePopover" p:label="Published Name" p:labelPlacement="TOP"  p:render="true" p:style="display:none">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="30" p:maxLength="20"/>
                    </property>
                </bean>
                <!--these fields above are used for creating a cluster and moving AOs-->
                <bean parent="Uif-SecondaryActionButton-Small" p:disabled="@{disableMoveButtonForMoveAOCPopOver}"  p:id="moveAOCButton">
                    <property name="style" value="margin-top:1.5em;"/>
                    <property name="actionLabel" value="Move"/>
                    <property name="successCallback" value="jQuery('div[id=KS-CourseOfferingManagement-MoveAOCPopupForm]:gt(0)').detach();"/>
                    <property name="errorCallback" value="jQuery('div[id=KS-CourseOfferingManagement-MoveAOCPopupForm]:gt(0)').detach();"/>
                    <property name="methodToCall" value="moveToCluster"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="KS-HorizontalBoxGroup-WithRPadding" parent="Uif-HorizontalBoxGroup" p:style="padding-right: 20px" />

</beans>