<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="KS-CourseOfferingManagement-ViewAOClustersSection" parent="Uif-VerticalBoxSection" >
        <!--<property name="headerText" value="Clusters (@{clusterResultList.size()})"/>-->
        <property name="items">
            <list>
                <bean parent="Uif-Label" p:labelText="Clusters (@{clusterResultList.size()})" p:renderColon="false" />
                <ref bean="KS-CourseOfferingManagement-AO-ToolBarSection-ClusterTab"/>

                <ref bean="KS-CourseOfferingManagement-AOClustersCollection"/>
                <ref bean="KS-CourseOfferingManagement-RenameAOCPopupForm"/>
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-AOClustersCollection" parent="KS-Uif-StackedCollectionSection-HorizontalSubCollectionFieldGroup" p:renderAddLine="false"  p:renderLineActions="false"
          p:onDocumentReadyScript="removeCheckboxColumns(1, 'activityOfferingsPerCluster', &quot;handleToolbar('KS-CourseOfferingManagement-AOClustersCollection',['enableApproveButton', 'enableDeleteButton', 'enableDraftButton', 'enableMoveToButton'], ['KS-CourseOfferingManagement-ToolBar-Approve-AO-ClusterTab','KS-CourseOfferingManagement-ToolBar-Delete-AO-ClusterTab', 'KS-CourseOfferingManagement-ToolBar-Draft-AO-ClusterTab', 'KS-CourseOfferingManagement-ToolBar-MoveTo-AO-ClusterTab'])&quot;), removeZebraColoring('activityOfferingsPerCluster');">
        <property name="disclosure.render" value="false"/>
        <property name="collectionObjectClass" value="org.kuali.student.enrollment.class2.courseoffering.dto.ActivityOfferingClusterWrapper" />
        <property name="propertyName" value="clusterResultList" />
        <property name="cssClasses" value="aoc_disclosure"/>
        <property name="headerText" value=""/>
        <property name="collectionLookup.quickfinderAction.render" value="false" />
        <property name="layoutManager.lineGroupPrototype.disclosure.render" value="true"/>
        <!--<property name="layoutManager.lineGroupPrototype.header.headerText" value="@{#line.clusterNameForDisplay}"/>-->
        <property name="layoutManager.addLineGroup.header.render" value="false"/>

        <property name="items">
            <list>
                <ref bean="KS-CourseOfferingManagement-ClusterHeaderText"/>
                <ref bean="KS-CourseOfferingManagement-ClusterAOHeaderText"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="KS-CourseOfferingManagement-ActivityOfferingsPerClusterSubSection" />
                <ref bean="KS-CourseOfferingManagement-RegistrationGroupsPerClusterSubSection" />
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ClusterAOHeaderText" parent="Uif-HorizontalFieldGroup" p:fieldLabel.render="false">
        <property name="items">
            <list>
                <bean parent="Uif-Label" p:labelText="Activities (@{#line.aoWrapperList.size()})" p:renderColon="false" />
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ClusterHeaderText" parent="Uif-HorizontalFieldGroup" p:fieldLabel.render="false">
        <property name="items">
            <list>
                <bean parent="Uif-Label" p:labelText="@{#line.clusterNameForDisplay}" p:renderColon="false" />
                <bean parent="Uif-Label" p:labelText="&#160;&#160;|&#160;&#160;" p:renderColon="false" />
                <bean parent="Uif-Label" p:labelText="@{#line.formatNameForDisplay}"  p:renderColon="false" />
                <bean parent="Uif-NavigationActionLink"  p:actionLabel="Rename"
                      p:onClickScript="writeHiddenToForm(&quot;actionParameters[selectedLineIndex]&quot;, &quot;@{#index}&quot;); writeHiddenToForm(&quot;actionParameters[selectedCollectionPath]&quot;, &quot;clusterResultList&quot;); toggleAddAOCButton(&quot;renameAOCButton&quot;,&quot;privateClusterNameForRename_control&quot;);"
                      p:actionScript="openPopupContent(e,'KS-CourseOfferingManagement-RenameAOCPopupForm',{align:'right',tail:{align:'right'}});" p:style="float:right"
                p:successCallback="jQuery('div[id=KS-CourseOfferingManagement-RenameAOCPopupForm]:gt(0)').detach();"
                p:errorCallback="jQuery('div[id=KS-CourseOfferingManagement-RenameAOCPopupForm]:gt(0)').detach();"
                      p:componentSecurity.performActionAuthz="true" p:actionEvent="renameCluster"/>
                <!--<bean parent="Uif-Label" p:labelText="&#160;&#160;|&#160;&#160;" p:renderColon="false" p:style="float:right"/>-->
                <!-- jQuery('input.required[value=]').removeClass('required'); work-around added to stop a problem where form validation was preventing delete from working -->
                <bean parent="Uif-NavigationActionLink" p:methodToCall="showDeleteClusterConfirmPage"
                      p:onClickScript="jQuery('input.required[value=]').removeClass('required');writeHiddenToForm(&quot;actionParameters[selectedLineIndex]&quot;, &quot;@{#index}&quot;);"
                      p:actionLabel="Delete&#160;&#160;|&#160;&#160;"  p:style="float:right"
                      p:componentSecurity.performActionAuthz="true" p:actionEvent="deleteCluster"/>

            </list>
        </property>

    </bean>

    <bean id="KS-CourseOfferingManagement-RenameAOCPopupForm" parent="Uif-VerticalBoxSection">
        <property name="hidden" value="true"/>

        <property name="style" value="margin-bottom:0;padding-left:10px;padding-right:10px;"/>
        <property name="items">
            <list>
                <bean parent="Uif-InputField-LabelTop" p:id="privateClusterNameForRename" p:label="Private Name" p:propertyName="privateClusterNameForRenamePopover" p:required="true">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="30"  p:maxLength="20" p:onKeyUpScript="toggleAddAOCButton('renameAOCButton','privateClusterNameForRename_control');"/>
                    </property>
                </bean>
                <bean parent="Uif-InputField-LabelTop" p:id="publishedClusterNameForRename"  p:propertyName="publishedClusterNameForRenamePopover" p:label="Published Name" >
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="30"  p:maxLength="20"/>
                    </property>
                </bean>
                <bean parent="Uif-SecondaryActionButton-Small" p:id="renameAOCButton">
                    <property name="style" value="margin-top:1.5em;"/>
                    <property name="actionLabel" value="Rename"/>
                    <property name="methodToCall" value="renameAClusterThroughDialog"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-ActivityOfferingsPerClusterSubSection" parent="Uif-TableCollectionSubSection"
          p:renderAddLine="false"  p:renderLineActions="true">
        <property name="id" value="activityOfferingsPerCluster" />
        <property name="collectionObjectClass" value="org.kuali.student.enrollment.class2.courseoffering.dto.ActivityOfferingWrapper" />
        <property name="propertyName" value="aoWrapperList" />
        <property name="headerText" value=""/>
        <property name="collectionLookup.quickfinderAction.render" value="false" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.applyDefaultCellWidths" value="false" />
        <property name="layoutManager.applyAlternatingRowStyles" value="false" />
        <property name="layoutManager.richTable.templateOptions">
            <map merge="true">
                <entry key="sDom" value="rtip"/>
                <entry key="aaSorting" value="[[ 3, 'desc' ], [ 1, 'asc']]"/>
                <entry key="bPaginate" value="false"/>
                <entry key="bAutoWidth" value="false"/>
            </map>
        </property>
        <property name="items">
            <list>
                <bean parent="KS-Uif-InputField-Simple" p:propertyName="isCheckedByCluster" p:required="false" p:readOnlyDisplayReplacement=" "
                      p:onChangeScript="handleToolbar('KS-CourseOfferingManagement-AOClustersCollection',['enableApproveButton', 'enableDeleteButton', 'enableDraftButton', 'enableMoveToButton'], ['KS-CourseOfferingManagement-ToolBar-Approve-AO-ClusterTab','KS-CourseOfferingManagement-ToolBar-Delete-AO-ClusterTab', 'KS-CourseOfferingManagement-ToolBar-Draft-AO-ClusterTab', 'KS-CourseOfferingManagement-ToolBar-MoveTo-AO-ClusterTab']);">
                    <property name="control">
                        <bean parent="Uif-CheckboxControl" p:disabled="false"/>
                    </property>
                </bean>
                <bean parent="Uif-HorizontalFieldGroup" p:fieldLabel.labelText="CODE">
                    <property name="items">
                        <list>
                            <bean parent="Uif-DataField" p:propertyName="aoInfo.activityCode" p:fieldLabel.render="false">
                                <property name="inquiry">
                                    <bean parent="Uif-Inquiry" p:dataObjectClassName="org.kuali.student.enrollment.class2.courseoffering.dto.ActivityOfferingWrapper" p:inquiryParameters="aoInfo.id" />
                                </property>
                            </bean>
                            <bean parent="Uif-ImageField" p:hidden="@{#lp.colocatedAoInfo.isEmpty()}"
                                  p:image.altText="@{#line.colocatedAoInfoUI}"
                                  p:source="@{#ConfigProperties['ks.externalizable.images.url']}/colocate_icon.png">
                                <property name="style" value="padding-left:5px"/>
                                <property name="toolTip">
                                    <bean parent="Uif-TooltipFocus" p:onMouseHover="true" p:tooltipContent="@{#lp.colocatedAoInfoUI}"/>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-DataField"
                      p:label="STATUS"
                      p:propertyName="stateName" />
                <bean parent="Uif-DataField"
                      p:label="TYPE"
                      p:propertyName="typeName"/>
                <bean parent="Uif-DataField"
                      p:label="MAX ENR"
                      p:propertyName="aoInfo.maximumEnrollment"/>
                <bean parent="Uif-MessageField"
                      p:label="DAYS"
                      p:messageText="@{#line.daysDisplayName}" />
                <bean parent="Uif-MessageField"
                      p:label="START TIME"
                      p:messageText="@{#line.startTimeDisplay}" />
                <bean parent="Uif-MessageField"
                      p:label="END TIME"
                      p:messageText="@{#line.endTimeDisplay}" />
                <bean parent="Uif-MessageField"
                      p:label="BUILDING"
                      p:messageText="@{#line.buildingName}" />
                <bean parent="Uif-MessageField"
                      p:label="ROOM"
                      p:messageText="@{#line.roomName}" />

                <bean parent="Uif-MessageField"
                      p:label="INSTRUCTOR"
                      p:messageText="@{#line.instructorDisplayNames}" />
                <bean name="enableApproveButton" parent="KS-Uif-InputField-Simple" p:propertyName="enableApproveButton"/>
                <bean name="enableDraftButton" parent="KS-Uif-InputField-Simple" p:propertyName="enableDraftButton"/>
                <bean name="enableSuspendButton" parent="KS-Uif-InputField-Simple" p:propertyName="enableSuspendButton"/>
                <bean name="enableCancelButton" parent="KS-Uif-InputField-Simple" p:propertyName="enableCancelButton"/>
                <bean name="enableReinstateButton" parent="KS-Uif-InputField-Simple" p:propertyName="enableReinstateButton" />
                <bean name="enableDeleteButton" parent="KS-Uif-InputField-Simple" p:propertyName="enableDeleteButton" />
                <bean name="enableCopyAOActionLink" parent="KS-Uif-InputField-Simple" p:propertyName="enableCopyAOActionLink" />
                <bean name="enableEditAOActionLink" parent="KS-Uif-InputField-Simple" p:propertyName="enableEditAOActionLink" />
                <bean name="enableMoveToButton" parent="KS-Uif-InputField-Simple" p:propertyName="enableMoveToButton" />
            </list>
        </property>

        <property name="layoutManager.richTable.hiddenColumns">
            <set>
                <value>enableApproveButton</value>
                <value>enableDraftButton</value>
                <value>enableSuspendButton</value>
                <value>enableCancelButton</value>
                <value>enableReinstateButton</value>
                <value>enableDeleteButton</value>
                <value>enableCopyAOActionLink</value>
                <value>enableEditAOActionLink</value>
                <value>enableMoveToButton</value>
            </set>
        </property>

        <property name="lineActions">
            <list>
                <bean parent="Uif-NavigationActionLink" p:methodToCall="copyAO" p:actionLabel="@{#line.isEnableEditAOActionLink() ? 'Copy&#160;&#160;|&#160;&#160;' : 'Copy'}"
                      p:render="@{#line.isEnableCopyAOActionLink()}" p:actionEvent="copyAOonManageAOsPage"
                      p:style="padding-right:3px;"  />
                <bean parent="Uif-NavigationActionLink" p:methodToCall="edit" p:actionLabel="Edit"
                      p:render="@{#line.isEnableEditAOActionLink()}" p:actionEvent="editAOonManageAOsPage"/>
            </list>
        </property>
    </bean>

    <!--p:style="display: none"-->

    <bean id="KS-CourseOfferingManagement-RegistrationGroupsPerClusterSubSection" parent="Uif-Disclosure-TableCollectionSubSection"
          p:renderAddLine="false"  p:renderLineActions="false" >
        <property name="id" value="registrationGroupsPerCluster" />
        <!--<property name="hidden" value="true"/>-->
        <property name="collectionObjectClass" value="org.kuali.student.enrollment.class2.courseoffering.dto.RegistrationGroupWrapper" />
        <property name="propertyName" value="rgWrapperList" />
        <property name="headerText" value="View Registration Groups (@{#line.rgWrapperList.size()})"/>
        <property name="collectionLookup.quickfinderAction.render" value="false" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.applyDefaultCellWidths" value="false" />
        <property name="layoutManager.applyAlternatingRowStyles" value="false" />
        <property name="disclosure.defaultOpen" value="false"/>
        <property name="layoutManager.richTable.templateOptions">
            <map merge="true">
                <entry key="sDom" value="rtip"/>
                <entry key="aaSorting" value="[[ 0, 'asc' ]]"/>
                <entry key="bPaginate" value="false"/>
                <entry key="bAutoWidth" value="false"/>
            </map>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-DataField"
                      p:label="REG GROUP ID"
                      p:propertyName="rgInfo.name" p:valign="middle">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="STATE"
                      p:messageText="@{#line.stateKey}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="CODE"
                      p:messageText="@{#line.aoActivityCodeText}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="STATUS"
                      p:messageText="@{#line.aoStateNameText}" />
                <bean parent="Uif-MessageField"
                      p:label="TYPE"
                      p:messageText="@{#line.aoTypeNameText}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="MAX ENR"
                      p:messageText="@{#line.aoMaxEnrText}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="DAYS"
                      p:messageText="@{#line.daysDisplayName}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="START TIME"
                      p:messageText="@{#line.startTimeDisplay}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="END TIME"
                      p:messageText="@{#line.endTimeDisplay}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="BLDG"
                      p:messageText="@{#line.buildingName}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="ROOM"
                      p:messageText="@{#line.roomName}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="INSTRUCTOR"
                      p:messageText="@{#line.aoInstructorText}">
                </bean>
            </list>
        </property>
        <property name="lineActions">
            <list>
                <bean parent="Uif-NavigationActionLink" p:methodToCall="edit" p:actionLabel="Edit" />
            </list>
        </property>
    </bean>

    <bean id="KS-CourseOfferingManagement-AO-ToolBarSection-ClusterTab" parent="KS-Uif-HorizontalToolbarSection" p:render="@{!currentCourseOfferingWrapper.crossListed}">
        <property name="items">
            <list>
                <bean parent="KS-Uif-ToolbarGroup">
                    <property name="items">
                        <list>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Add-AO-ClusterTab" parent="KS-CourseOfferingManagement-ToolBar-Add-parent" p:actionLabel="Add Activity"  p:disabled="@{!enableAddButton}"
                                  p:performClientSideValidation="true" p:methodToCall="addActivityOfferings"
                                  p:actionScript="openPopupContent(e,'KS-CourseOfferingManagement-AddActivityOfferingPopupForm',{afterHidden:new function(){jQuery('#KS-CourseOfferingManagement-AddActivityOfferingPopupForm').find('input[type=text],select').val('');}});"/>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Approve-AO-ClusterTab" parent="KS-CourseOfferingManagement-ToolBar-Approve-parent" p:methodToCall="approveAOs" p:render="@{hasAO}"/>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Draft-AO-ClusterTab" parent="KS-CourseOfferingManagement-ToolBar-Draft-parent" p:methodToCall="draftAOs" p:render="@{hasAO}"/>
                            <bean id="KS-CourseOfferingManagement-ToolBar-Delete-AO-ClusterTab" parent="KS-CourseOfferingManagement-ToolBar-Delete-parent" p:methodToCall="deleteAOs" p:render="@{hasAO}"/>
                        </list>
                    </property>
                </bean>
                <bean parent="KS-Uif-ToolbarGroup">
                    <property name="items">
                        <list>
                            <bean id="KS-CourseOfferingManagement-ToolBar-AddCluster-AO-ClusterTab" parent="KS-CourseOfferingManagement-ToolBar-AddCluster-parent" p:methodToCall="addCluster" p:render="@{hasAO}" p:disabled="@{!enableAddClusterButton}"
                                  p:actionScript="openPopupContent(e,'KS-CourseOfferingManagement-AddAOCPopupForm',{afterHidden:new function(){jQuery('#KS-CourseOfferingManagement-AddAOCPopupForm').find('input[type=text],select').val('');}});"/>
                            <bean id="KS-CourseOfferingManagement-ToolBar-MoveTo-AO-ClusterTab" parent="KS-CourseOfferingManagement-ToolBar-MoveTo-parent"  p:render="@{hasAO}"
                                  p:actionScript="addNewClusterOptionSuccessCallBack(); openPopupContent(e,'KS-CourseOfferingManagement-MoveAOCPopupForm',{afterHidden:new function(){jQuery('#KS-CourseOfferingManagement-MoveAOCPopupForm').find('input[type=text],select').val('');}});"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

</beans>