<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="KS-AcademicTerm-EditSection" parent="Uif-VerticalBoxSection">
        <property name="headerText" value="Terms"/>
        <property name="header.render" value="false"/>
        <property name="cssClasses" value="ac_disclosure"/>
        <property name="header.style" value="margin-bottom:0"/>
        <property name="validationMessages" ref="KS-ValidationMessages-Off"/>
        <property name="items">
            <list>
                <ref bean="KS-AcademicCalendar-Overview-WithoutTerms"/>
                <ref bean="KS-AcademicTerm-EditSection-Main"/>
            </list>
        </property>
    </bean>

    <bean id="KS-AcademicCalendar-Overview-WithoutTerms" parent="Uif-VerticalBoxSubSection">
        <property name="headerText" value=""/>
        <property name="disclosure.render" value="false"/>
        <!--<property name="hidden" value="@{#view.readOnly}"/>-->
        <property name="header">
            <bean parent="Uif-HeaderThree"/>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-VerticalBoxGroup">
                    <property name="items">
                        <list>
                            <ref bean="KS-AcademicCalendar-AcalOverview"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="KS-AcademicTerm-EditSection-Main"
          parent="KS-Uif-StackedCollectionSection-VerticalSubCollectionFieldGroup">
        <property name="id" value="acal-term"/>
        <property name="readOnly" value="@{#view.readOnly}"/>
        <property name="propertyName" value="termWrapperList"/>
        <property name="collectionObjectClass"
                  value="org.kuali.student.enrollment.class2.acal.dto.AcademicTermWrapper"/>
        <property name="style" value="min-width:70em;"/>
        <property name="additionalCssClasses">
            <list merge="true">
                <value>ks-subSection</value>
                <value>ks-subSection-marginTop</value>
            </list>
        </property>
        <!-- KSENROLL-12648: workaround for rice 2.4 upgrade issue -->
        <property name="onDocumentReadyScript"
                  value="window.setTimeout(removeNewItemHighlights(),5000); resetDirtyFields('AcalEdit-DirtyFields'); initAddExamPeriodButtons('acal-term-examdates', 'exam_date_type', 'acal-term-examdates-add', '@{#ConfigProperties['application.url']}');"/>
        <property name="validationMessages" ref="KS-ValidationMessages-Off"/>
        <property name="headerText" value="&#160;"/>
        <property name="layoutManager.addLineGroup.header.render" value="true"/>
        <property name="layoutManager.addLineGroup.layoutManager.additionalCssClasses" value="ks-search-group-section"/>
        <property name="layoutManager.addLineGroup.footer.additionalCssClasses" value="ks-search-group-footer"/>
        <property name="layoutManager.lineGroupPrototype">
            <bean id="term_section" parent="Uif-CollectionVerticalBoxItem">

                <property name="disclosure.render" value="true"/>
                <property name="disclosure.collapsedIconClass" value="ks-fontello-icon-right-open"/>
                <property name="disclosure.expandedIconClass" value="ks-fontello-icon-down-open"/>
                <property name="disclosure.defaultOpen" value="false"/>
                <property name="header">
                    <bean parent="Uif-HeaderFour"
                          p:headerText="@{#empty(#line.parentTerm) ? '' : 'Subterm: '}@{#line.termNameForUI}">
                        <property name="rightGroup">
                            <bean parent="Uif-HorizontalBoxGroup">
                                <!-- Rice Issue Workaround Watch KSENROLL-7408 -->
                                <property name="items">
                                    <list>
                                        <bean parent="Uif-HorizontalBoxGroup">
                                            <property name="render"
                                                      value="@{#line.termInfo != null and #line.termInfo.id != null }"/>
                                            <property name="items">
                                                <list>
                                                    <bean id="term_official" parent="Uif-ActionLink"
                                                          p:methodToCall="makeTermOfficial"
                                                          p:actionLabel="Make Official"
                                                          p:render="@{!#line.official and !#view.readOnly}"
                                                          p:onClickScript="writeHiddenToForm(&quot;actionParameters[selectedLineIndex]&quot;, &quot;@{#index}&quot;);
                                                          findDirtyFields('AcalEdit-DirtyFields');"/>
                                                    <bean parent="Uif-ActionLink" p:methodToCall="deleteTerm"
                                                          p:actionLabel="Delete"
                                                          p:onClickScript="writeHiddenToForm(&quot;actionParameters[selectedLineIndex]&quot;, &quot;@{#index}&quot;);
                                                           findDirtyFields('AcalEdit-DirtyFields');"
                                                          p:render="@{!#line.official and !#view.readOnly}"/>
                                                    <bean parent="KS-Lozenge-Green-Uif-Message" p:messageText="Official"
                                                          p:render="@{#line.official}">
                                                        <property name="dataAttributes">
                                                            <map key-type="java.lang.String" merge="true">
                                                                <entry key="aft-id"
                                                                       value="@{#line.termInfo.code}-Official-Lozenge"/>
                                                            </map>
                                                        </property>
                                                    </bean>

                                                    <bean parent="KS-Lozenge-Grey-Uif-Message" p:messageText="Draft"
                                                          p:render="@{!#line.official}">
                                                        <property name="dataAttributes">
                                                            <map key-type="java.lang.String" merge="true">
                                                                <entry key="aft-id"
                                                                       value="@{#line.termInfo.code}-Draft-Lozenge"/>
                                                            </map>
                                                        </property>
                                                    </bean>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean id="term_cancel_button" parent="Uif-ActionLink"
                                              p:methodToCall="cancelTerm" p:actionLabel="Cancel"
                                              p:render="@{#line.termInfo == null or #line.termInfo.id == null }"
                                              p:onClickScript="writeHiddenToForm(&quot;actionParameters[selectedLineIndex]&quot;, &quot;@{#index}&quot;);"/>
                                    </list>
                                </property>
                            </bean>
                        </property>
                    </bean>
                </property>
            </bean>
        </property>
        <property name="addLineActions">
            <list>
                <!-- Needed to prevent focus from moving to first line and re-validating, which always will cause an error
                 since the first field is a validated dropdown -->
                <bean parent="Uif-AddLineAction-SecondaryButton" p:focusOnIdAfterSubmit="SELF" p:actionLabel="Add Term"
                      p:onClickScript="findDirtyFields('AcalEdit-DirtyFields');">
                    <property name="additionalCssClasses" value="ks-fontello-icon-plus-1"/>
                </bean>
            </list>
        </property>
        <property name="lineActions">
            <list>
                <!-- Empty to override defaults-->
            </list>
        </property>
        <property name="addLineLabel.messageText" value="Add Terms"/>
        <property name="addLineItems">
            <list>
                <bean id="term_type_add" parent="KS-Uif-InputField-LabelTop" p:propertyName="termType"
                      p:render="@{#isAddLine}"
                      p:label="Term" p:required="true">
                    <property name="control">
                        <bean parent="KS-Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.acal.keyvalue.AcademicTermTypeKeyValues"
                              p:addBlankOption="false"/>
                    </property>
                </bean>
                <bean id="term_start_date_add" parent="KS-Uif-InputField-LabelTop" p:propertyName="startDate"
                      p:label="Start Date" p:required="true">
                    <property name="control">
                        <bean parent="KS-Uif-Deferred-Datepicker-DateControl"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="KS-BasicDatePatternConstraint"/>
                    </property>
                    <property name="attributeQuery">
                        <bean parent="Uif-AttributeQueryConfig">
                            <property name="queryMethodToCall" value="termInfoAjaxQuery"/>
                            <property name="queryMethodArgumentFieldList">
                                <list>
                                    <value>startDate</value>
                                    <value>termType</value>
                                </list>
                            </property>
                            <property name="queryFieldMapping" value="{startDate:startDate,termType:termType}"/>
                            <property name="returnFieldMapping" value="termCode:termCode"/>
                        </bean>
                    </property>
                </bean>
                <bean id="term_end_date_add" parent="KS-Uif-InputField-LabelTop" p:propertyName="endDate"
                      p:label="End Date" p:required="true">
                    <property name="control">
                        <bean parent="KS-Uif-Deferred-Datepicker-DateControl"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="KS-BasicDatePatternConstraint"/>
                    </property>
                </bean>
                <!-- bean id="parent_term_type" parent="KS-Uif-InputField-LabelTop" p:propertyName="parentTerm" p:label="Parent Term" p:render="@{#isAddLine}" p:refreshWhenChangedPropertyNames="#lp.termType">
                    <property name="control">
                        <bean parent="KS-Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.acal.keyvalue.AcademicTermParentTypeKeyValues" p:addBlankOption="false"/>
                    </property>
                </bean -->
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-VerticalFieldGroup" p:fieldLabel.render="false">
                    <property name="items">
                        <list>
                            <bean parent="Uif-HorizontalBoxGroup">
                                <property name="additionalCssClasses">
                                    <list merge="true">
                                        <value>ks-subSection</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean id="term_type_edit" parent="KS-Uif-InputField-LabelTop"
                                              p:propertyName="termType" p:render="@{#isAddLine}"
                                              p:label="Term Type" p:required="true">
                                            <property name="control">
                                                <bean parent="KS-Uif-DropdownControl"/>
                                            </property>
                                            <property name="optionsFinder">
                                                <bean class="org.kuali.student.enrollment.class2.acal.keyvalue.AcademicTermTypeKeyValues"
                                                      p:addBlankOption="false"/>
                                            </property>
                                            <property name="attributeQuery">
                                                <bean parent="Uif-AttributeQueryConfig">
                                                    <property name="queryMethodToCall" value="termInfoAjaxQuery"/>
                                                    <property name="queryMethodArgumentFieldList">
                                                        <list>
                                                            <value>startDate</value>
                                                            <value>termType</value>
                                                        </list>
                                                    </property>
                                                    <property name="queryFieldMapping"
                                                              value="{startDate:startDate,termType:termType}"/>
                                                    <property name="returnFieldMapping" value="termCode:termCode"/>
                                                </bean>
                                            </property>
                                        </bean>
                                        <bean id="term_name" parent="KS-Uif-InputField-LabelTop" p:propertyName="name"
                                              p:render="@{!#isAddLine}" p:label="Term Name" p:required="true">
                                            <property name="control">
                                                <bean parent="KS-Uif-TextControl" p:size="30"/>
                                            </property>
                                        </bean>
                                        <bean id="term_code" parent="KS-Uif-InputField-LabelTop"
                                              p:propertyName="termCode" p:label="Term Code"
                                              p:render="@{#line.termCode != T(org.kuali.student.enrollment.class2.acal.util.CalendarConstants).EMPTY_TERM_CODE}">
                                            <property name="control">
                                                <bean parent="KS-Uif-TextControl" p:disabled="true" p:size="9">
                                                    <property name="cssClasses">
                                                        <list>
                                                            <value>acal_term_code</value>
                                                        </list>
                                                    </property>
                                                </bean>
                                            </property>
                                        </bean>
                                        <bean id="parent_term_name" parent="KS-Uif-InputField-LabelTop"
                                              p:propertyName="parentTermName" p:label="Parent Term"
                                              p:render="@{#line.parentTerm != null and #line.parentTerm != ''}">
                                            <property name="control">
                                                <bean parent="KS-Uif-TextControl" p:disabled="true" p:size="20">
                                                    <property name="cssClasses">
                                                        <list>
                                                            <value>acal_term_code</value>
                                                        </list>
                                                    </property>
                                                </bean>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="Uif-HorizontalBoxGroup">
                                <property name="additionalCssClasses">
                                    <list merge="true">
                                        <value>ks-subSection</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean id="term_start_date" parent="KS-Uif-InputField-LabelTop"
                                              p:propertyName="startDate" p:label="Start Date" p:required="true">
                                            <property name="control">
                                                <bean parent="KS-Uif-Deferred-Datepicker-DateControl"/>
                                            </property>
                                            <property name="validCharactersConstraint">
                                                <bean parent="KS-BasicDatePatternConstraint"/>
                                            </property>
                                            <property name="attributeQuery">
                                                <bean parent="Uif-AttributeQueryConfig">
                                                    <property name="queryMethodToCall" value="termInfoAjaxQuery"/>
                                                    <property name="queryMethodArgumentFieldList">
                                                        <list>
                                                            <value>startDate</value>
                                                            <value>termType</value>
                                                        </list>
                                                    </property>
                                                    <property name="queryFieldMapping"
                                                              value="{startDate:startDate,termType:termType}"/>
                                                    <property name="returnFieldMapping" value="termCode:termCode"/>
                                                </bean>
                                            </property>
                                        </bean>
                                        <bean id="term_end_date" parent="KS-Uif-InputField-LabelTop"
                                              p:propertyName="endDate" p:label="End Date" p:required="true">
                                            <property name="control">
                                                <bean parent="KS-Uif-Deferred-Datepicker-DateControl"/>
                                            </property>
                                            <property name="validCharactersConstraint">
                                                <bean parent="KS-BasicDatePatternConstraint"/>
                                            </property>
                                        </bean>
                                        <bean id="term_instructional_days" parent="KS-Uif-DataField-LabelTop"
                                              p:propertyName="instructionalDays" p:label="Instructional Days"
                                              p:render="@{!#isAddLine}" p:fieldLabel.renderColon="false">
                                            <property name="toolTip">
                                                <bean parent="Uif-KS-TooltipFocus" p:onMouseHover="true"
                                                      p:tooltipContent="Instructional Days include @{#lp.instructionalDayConfig}"/>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean id="termTypeHidden" parent="KS-Uif-InputField" p:propertyName="termType"
                                  p:render="@{!#isAddLine}" p:hidden="true">
                                <property name="control">
                                    <bean parent="KS-Uif-HiddenControl"/>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="KS-KeyDatesGroup-EditSubSection"/>
                <ref bean="KS-ExamDates-EditSubSection"/>
            </list>
        </property>
    </bean>

    <bean id="KS-KeyDatesGroup-EditSubSection"
          parent="KS-Uif-StackedCollectionSubSection-HorizontalSubCollectionFieldGroupWithDisclosure"
          p:onDocumentReadyScript="initAddKeyDateButton('key_date_addblankline_button', 'key-dates-table');highlightElements(@{validationJSONString == '' ? '{}' : validationJSONString}, @{addLineValid}, '@{#ConfigProperties['application.url']}');"
          p:additionalCssClasses="acal_keydate_group,ks-subSection,ks-subSection-marginTop,ks-uif-diclosureContent-noIndent">
        <property name="id" value="acal-term-keydatesgroup"/>
        <property name="disclosure.render" value="false"/>
        <property name="readOnly" value="@{#view.readOnly}"/>
        <property name="propertyName" value="keyDatesGroupWrappers"/>
        <property name="collectionObjectClass"
                  value="org.kuali.student.enrollment.class2.acal.dto.KeyDatesGroupWrapper"/>
        <property name="headerText" value="Key Dates"/>
        <property name="header.render" value="@{!#view.readOnly}"/>

        <!-- Move the add button to the right of the fields -->
        <property name="layoutManager.addLineGroup.layoutManager.additionalCssClasses" value="ks-search-group-section"/>
        <property name="layoutManager.addLineGroup.footer.additionalCssClasses" value="ks-search-group-footer"/>
        <property name="layoutManager.addLineGroup.id" value="key_date_grp_section"/>

        <property name="layoutManager.addLineGroup.header.render" value="false"/>
        <property name="layoutManager.lineGroupPrototype.validationMessages.displayMessages" value="false"/>
        <property name="layoutManager.lineGroupPrototype.header.headerText"
                  value="@{#line.keyDateGroupNameUI} Key Dates"/>
        <property name="layoutManager.lineGroupPrototype.id" value="key_date_grp_section"/>
        <property name="layoutManager.lineGroupPrototype.header.additionalCssClasses" value="ks-key-date-header"/>
        <property name="layoutManager.lineGroupPrototype.additionalCssClasses" value="ks-section"/>
        <property name="layoutManager.lineGroupPrototype.header.id" value="ks-key-date-header-id"/>
        <property name="addLineActions">
            <list>
                <!-- Needed to prevent focus from moving to first line and re-validating, which always will cause an error
                since the first field is a validated dropdown -->
                <bean parent="Uif-AddLineAction-SecondaryButton" p:actionLabel="Add Key Date Group" p:focusOnIdAfterSubmit="SELF">
                    <property name="disabled" value="@{(#lp.keyDateGroupType == null) or (#lp.keyDateGroupType == '')}"/>
                    <property name="additionalCssClasses" value="ks-fontello-icon-plus-1"/>
                    <property name="refreshWhenChangedPropertyNames" value="#lp.keyDateGroupType"/>
                </bean>
            </list>
        </property>
        <property name="layoutManager.lineGroupPrototype.header.rightGroup">
            <bean id="KeyDateGroup-RightGroup" parent="Uif-VerticalBoxGroup">
                <property name="additionalCssClasses">
                    <list merge="true">
                        <value>right-aligned</value>
                    </list>
                </property>
                <!--<property name="items">-->
                <!--<bean id="key_date_group_delete_button" parent="Uif-SecondaryActionButton-Small"-->
                <!--p:methodToCall="deleteKeyDateGroup" p:actionLabel="Delete keydate group"/>-->
                <!--</property>-->
            </bean>
        </property>
        <property name="layoutManager.lineGroupPrototype.header.rightGroup.items">
            <list>
                <bean id="key_date_group_delete_button" parent="KS-Uif-ActionLink" p:actionLabel="Delete" p:methodToCall="deleteKeyDateGroup"
                      p:onClickScript="writeHiddenToForm(&quot;actionParameters[selectedLineIndex]&quot;, &quot;@{#index}&quot;);"
                      p:actionScript="actionInvokeHandler(this);"
                      p:actionImagePlacement="LEFT"
                      p:additionalCssClasses="right-aligned"
                      p:render="@{!#view.readOnly}">
                    <property name="actionImage">
                        <bean parent="Uif-Image" p:altText="Delete" p:title="Delete" p:source="" p:cssClasses="ks-fontello-icon-cancel"/>
                    </property>
                </bean>
                <!-- KSENROLL-12648: workaround for rice 2.4 upgrade issue -->
                <bean id="key_date_addblankline_button" parent="Uif-SecondaryActionButton" scope="prototype" p:actionScript="constructKeyDateAddBlankLine(e, '@{#lp.keyDateTypesJSON}', '@{#ConfigProperties['application.url']}');">
                    <property name="hidden" value="@{#parent.readOnly}"/>
                    <property name="actionLabel" value="Add Key Date"/>
                    <property name="additionalCssClasses" value="ks-fontello-icon-plus-1"/>
                </bean>
                <!--<bean id="key_date_group_delete_button" parent="Uif-SecondaryActionButton-Small"-->
                <!--p:methodToCall="deleteKeyDateGroup" p:actionLabel="Delete keydate group"/>-->
            </list>
        </property>
        <property name="lineActions">
            <null/>
            <!--<list>-->
                <!--<bean id="key_date_group_delete_button" parent="Uif-SecondaryActionButton-Small"-->
                      <!--p:methodToCall="deleteKeyDateGroup" p:actionLabel="Delete keydate group"/>-->
            <!--</list>-->
        </property>
        <property name="items">
            <list>
                <bean id="key_date_group_type" parent="KS-Uif-InputField-LabelTop" p:propertyName="keyDateGroupType"
                      p:render="@{#isAddLine}"
                      p:label="Key Date Group Type *" p:finalizeMethodToCall="populateKeyDateGroupTypes">
                    <property name="onDocumentReadyScript"
                              value="window.setTimeout(removeNewItemHighlights(),5000); resetDirtyFields('AcalEdit-DirtyFields');"/>
                    <property name="control">
                        <bean parent="KS-Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.courseoffering.keyvalue.DummyKeyValue"/>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="KS-KeyDates-EditSubSection"/>
            </list>
        </property>
    </bean>

    <bean id="KS-KeyDates-EditSubSection" parent="Uif-Disclosure-TableSubCollection-WithinSubSection"
          p:id="acal-term-keydates" p:readOnly="@{#view.readOnly}"
          p:onDocumentReadyScript="highlightElements(@{validationJSONString == '' ? '{}' : validationJSONString}, @{addLineValid}, '@{#ConfigProperties['application.url']}');"
          p:layoutManager.id="key-dates-table">
        <property name="propertyName" value="keydates"/>
        <property name="collectionObjectClass" value="org.kuali.student.enrollment.class2.acal.dto.KeyDateWrapper"/>
        <property name="header.render" value="false"/>
        <!--<property name="layoutManager.numberOfColumns" value="@{#view.readOnly ? 3 : 9}"/>-->
        <property name="layoutManager.style" value="width:100%;"/>
        <property name="layoutManager.applyDefaultCellWidths" value="false"/>
        <property name="layoutManager.applyAlternatingRowStyles" value="false"/>
        <!--<property name="validationMessages.displayMessages" value="false"/>-->
        <property name="layoutManager.addLineGroup.layoutManager.applyDefaultCellWidths" value="false"/>
        <property name="addBlankLineAction">
            <bean parent="KS-BottomAddLine"/>
        </property>
        <property name="addBlankLineAction.actionLabel" value="Add Key Date"/>

        <!-- KSENROLL-12648: workaround for rice 2.4 upgrade issue -->
        <property name="renderAddBlankLineButton" value="false"/>

        <property name="addLinePlacement" value="BOTTOM"/>
        <property name="layoutManager.renderSequenceField" value="false"/>
        <property name="layoutManager.generateAutoSequence" value="false"/>
        <property name="layoutManager.separateAddLine" value="false"/>
        <property name="layoutManager.richTable.disableTableSort" value="true"/>
        <property name="layoutManager.richTable.render" value="false"/>

        <!-- KSENROLL-12648: workaround for rice 2.4 upgrade issue -->
        <property name="additionalCssClasses" value="key-dates-sub-collection"/>

        <property name="items">
            <list>
                <bean id="key_date_type" parent="KS-Uif-InputField" p:propertyName="keyDateType"
                      p:readOnly="@{#line.keyDateType != null and #line.keyDateType != ''}" p:readOnlyDisplayReplacementPropertyName="keyDateNameUI"
                      p:label="Key Date Type *" p:required="true"
                      p:finalizeMethodToCall="populateKeyDateTypes" p:style="font-weight:bold;" p:additionalCssClasses="ks-subSection">
                    <property name="onDocumentReadyScript"
                              value="window.setTimeout(removeNewItemHighlights(),5000); resetDirtyFields('AcalEdit-DirtyFields');"/>
                    <property name="control">
                        <bean parent="KS-Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.courseoffering.keyvalue.DummyKeyValue"/>
                    </property>
                    <property name="bindingInfo">
                        <bean parent="Uif-BindingInfo"/>
                    </property>
                </bean>
                <bean id="key_date_start_date" parent="KS-Uif-InputField" p:propertyName="startDate"
                      p:readOnlyDisplayReplacementPropertyName="startDateUI"
                      p:label="Start Date">
                    <property name="control">
                        <bean parent="KS-Uif-Deferred-Datepicker-DateControl"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="KS-BasicDatePatternConstraint"/>
                    </property>
                </bean>
                <bean id="key_date_start_time" parent="KS-Uif-InputField" p:propertyName="startTime"
                      p:render="@{!#view.readOnly}" p:label="Start Time">
                    <property name="control">
                        <bean parent="KS-Uif-TextControl" p:size="4" p:watermarkText="hh:mm"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="TimePatternConstraint"/>
                    </property>
                </bean>
                <bean id="key_date_start_time_ampm" parent="KS-Uif-InputField" p:propertyName="startTimeAmPm"
                      p:render="@{!#view.readOnly}" p:defaultValue="AM"
                      p:additionalCssClasses="acal_keydate_radiobutton">
                    <property name="control">
                        <bean parent="KS-Uif-VerticalRadioControl" p:options-ref="hctime-options"
                              p:refreshWhenChangedPropertyNames="#lp.startTime" p:evaluateDisabledOnKeyUp="true">
                            <property name="disabled" value="@{#empty(#lp.startTime)}"/>
                        </bean>
                    </property>
                </bean>
                <bean id="key_date_end_date" parent="KS-Uif-InputField" p:propertyName="endDate"
                      p:render="@{!#view.readOnly}" p:label="End Date">
                    <property name="control">
                        <bean parent="KS-Uif-Deferred-Datepicker-DateControl"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="KS-BasicDatePatternConstraint"/>
                    </property>
                </bean>
                <bean parent="KS-Uif-DataField" p:propertyName="endDateUI" p:render="@{#view.readOnly}"
                      p:label="End Date"/>
                <bean id="key_date_end_time" parent="KS-Uif-InputField" p:propertyName="endTime"
                      p:render="@{!#view.readOnly}" p:label="End Time">
                    <property name="control">
                        <bean parent="KS-Uif-TextControl" p:size="4" p:watermarkText="hh:mm"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="TimePatternConstraint"/>
                    </property>
                </bean>
                <bean id="key_date_end_time_ampm" parent="KS-Uif-InputField" p:propertyName="endTimeAmPm"
                      p:render="@{!#view.readOnly}" p:defaultValue="AM"
                      p:additionalCssClasses="acal_keydate_radiobutton">
                    <property name="control">
                        <bean parent="KS-Uif-VerticalRadioControl" p:options-ref="hctime-options"
                              p:refreshWhenChangedPropertyNames="#lp.endTime" p:evaluateDisabledOnKeyUp="true">
                            <property name="disabled" value="@{#empty(#lp.endTime)}"/>
                        </bean>
                    </property>
                </bean>
            </list>
        </property>
        <property name="lineActions">
            <list>
                <bean id="key_date_delete_button" parent="KS-Uif-Delete-ActionLink" p:methodToCall="deleteKeyDate"
                      p:actionLabel="Delete"/>
            </list>
        </property>
    </bean>

    <!--Final Exam Period section-->
    <bean id="KS-ExamDates-EditSubSection"
          parent="KS-Uif-Disclosure-TableSubCollection-WithinSubSection-BottomAddLine-ExamPeriod" p:additionalCssClasses="ks-section"
          p:id="acal-term-examdates" p:readOnly="@{#view.readOnly}">
        <property name="propertyName" value="examdates"/>
        <property name="collectionObjectClass" value="org.kuali.student.enrollment.class2.acal.dto.ExamPeriodWrapper"/>
        <property name="header">
            <bean parent="Uif-HeaderFive"/>
        </property>
        <property name="headerText" value="Final Exam Period"/>
        <property name="disclosure.render" value="false"/>
        <property name="layoutManager.style" value="width:70%;"/>
        <property name="layoutManager.addLineGroup.layoutManager.applyDefaultCellWidths" value="false"/>
        <property name="addBlankLineAction.actionLabel" value="Add Final Exam Period"/>
        <property name="addBlankLineAction.onDocumentReadyScript"
                  value="hideAddExamPeriodButton('@{#collectionGroup.id}', 'exam_date_type', 'acal-term-examdates-add');"/>
        <property name="addBlankLineAction.id" value="acal-term-examdates-add"/>

        <property name="items">
            <list>
                <bean id="exam_date_type" parent="KS-Uif-DataField" p:propertyName="examPeriodNameUI" p:style="font-weight:bold;"/>
                <bean id="exam_date_start_date" parent="KS-Uif-InputField" p:propertyName="startDate"
                      p:render="@{!#view.readOnly}" p:label="Start Date">
                    <property name="control">
                        <bean parent="KS-Uif-Deferred-Datepicker-DateControl"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="KS-BasicDatePatternConstraint"/>
                    </property>
                </bean>
                <bean parent="KS-Uif-DataField" p:propertyName="startDateUI" p:render="@{#view.readOnly}"
                      p:label="Start Date"/>
                <bean id="exam_date_end_date" parent="KS-Uif-InputField" p:propertyName="endDate"
                      p:render="@{!#view.readOnly}" p:label="End Date">
                    <property name="control">
                        <bean parent="KS-Uif-Deferred-Datepicker-DateControl"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="KS-BasicDatePatternConstraint"/>
                    </property>
                </bean>
                <bean parent="KS-Uif-DataField" p:propertyName="endDateUI" p:render="@{#view.readOnly}"
                      p:label="End Date"/>

                <bean parent="KS-Uif-InputField" p:id="exclude_Saturday" p:label="Exclude Saturday"
                      p:propertyName="excludeSaturday" p:render="@{!#view.readOnly}">
                    <property name="control">
                        <bean parent="KS-Uif-CheckboxControl"/>
                    </property>
                </bean>
                <bean parent="Uif-MessageField" p:label="Exclude Saturday" p:fieldLabel.renderColon="false" p:render="@{#view.readOnly}"
                      p:messageText="@{(#line.isExcludeSaturdayUI() eq null or !#line.isExcludeSaturdayUI()) ? '':'Yes'}" />
                <bean parent="KS-Uif-InputField" p:id="exclude_Sunday" p:label="Exclude Sunday"
                      p:propertyName="excludeSunday" p:render="@{!#view.readOnly}">
                    <property name="control">
                        <bean parent="KS-Uif-CheckboxControl"/>
                    </property>
                </bean>
                <bean parent="Uif-MessageField" p:label="Exclude Sunday" p:fieldLabel.renderColon="false" p:render="@{#view.readOnly}"
                      p:messageText="@{(#line.isExcludeSundayUI() eq null or !#line.isExcludeSundayUI()) ? '':'Yes'}" />
            </list>
        </property>
        <property name="lineActions">
            <list>
                <bean id="exam_period_delete_link" parent="KS-Uif-Delete-ActionLink" p:methodToCall="markExamPeriodtoDelete"
                      p:actionLabel="Delete" p:render="@{!#view.readOnly}"/>
            </list>
        </property>
    </bean>

</beans>
